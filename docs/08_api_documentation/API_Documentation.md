# LawFirmAI API ë¬¸ì„œ (2025-01-18 ì—…ë°ì´íŠ¸)

## ê°œìš”

LawFirmAIëŠ” ë²•ë¥  ê´€ë ¨ ì§ˆë¬¸ì— ë‹µë³€í•˜ëŠ” ì§€ëŠ¥í˜• AI ì–´ì‹œìŠ¤í„´íŠ¸ì…ë‹ˆë‹¤. ì´ ë¬¸ì„œëŠ” LawFirmAIì˜ APIì™€ ì‚¬ìš©ë²•ì„ ì„¤ëª…í•©ë‹ˆë‹¤.

**ìµœì‹  ì—…ë°ì´íŠ¸ (2025-01-18)**: ë””ë ‰í† ë¦¬ êµ¬ì¡° ì¬êµ¬ì„±, Import ê²½ë¡œ ìµœì í™”, ì˜ì¡´ì„± ì£¼ì… ê°œì„ , í•µì‹¬ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ ì‹œìŠ¤í…œ êµ¬ì¶• ì™„ë£Œ

## ì£¼ìš” ê¸°ëŠ¥

### Phase 1: ëŒ€í™” ë§¥ë½ ê°•í™”
- **ì˜êµ¬ì  ì„¸ì…˜ ì €ì¥**: ëŒ€í™” ê¸°ë¡ì„ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥
- **ë‹¤ì¤‘ í„´ ì§ˆë¬¸ ì²˜ë¦¬**: ëŒ€ëª…ì‚¬ í•´ê²° ë° ë¶ˆì™„ì „í•œ ì§ˆë¬¸ ì™„ì„±
- **ì»¨í…ìŠ¤íŠ¸ ì••ì¶•**: ê¸´ ëŒ€í™”ë¥¼ ìš”ì•½í•˜ì—¬ í† í° ì œí•œ í•´ê²°
- **í†µí•© ì„¸ì…˜ ê´€ë¦¬**: ë©”ëª¨ë¦¬ì™€ DBë¥¼ ë™ì‹œì— ê´€ë¦¬

### Phase 2: ê°œì¸í™” ë° ì§€ëŠ¥í˜• ë¶„ì„
- **ì‚¬ìš©ì í”„ë¡œí•„ ê´€ë¦¬**: ì „ë¬¸ì„± ìˆ˜ì¤€, ê´€ì‹¬ ë¶„ì•¼, ì„ í˜¸ë„ ê´€ë¦¬
- **ê°ì • ë° ì˜ë„ ë¶„ì„**: ì‚¬ìš©ì ê°ì •ê³¼ ì˜ë„ë¥¼ íŒŒì•…í•˜ì—¬ ì ì ˆí•œ ì‘ë‹µ í†¤ ê²°ì •
- **ëŒ€í™” íë¦„ ì¶”ì **: ëŒ€í™” íŒ¨í„´ í•™ìŠµ ë° ë‹¤ìŒ ì§ˆë¬¸ ì˜ˆì¸¡

### Phase 3: ì¥ê¸° ê¸°ì–µ ë° í’ˆì§ˆ ëª¨ë‹ˆí„°ë§
- **ë§¥ë½ì  ë©”ëª¨ë¦¬ ê´€ë¦¬**: ì¤‘ìš”í•œ ì‚¬ì‹¤ì„ ì¥ê¸° ê¸°ì–µìœ¼ë¡œ ì €ì¥
- **ëŒ€í™” í’ˆì§ˆ ëª¨ë‹ˆí„°ë§**: í’ˆì§ˆ í‰ê°€ ë° ê°œì„ ì  ì œì•ˆ
- **ì„±ëŠ¥ ìµœì í™”**: ë©”ëª¨ë¦¬ ê´€ë¦¬ ë° ìºì‹œ ì‹œìŠ¤í…œ

### Phase 5: ì„±ëŠ¥ ìµœì í™” (2025-01-10 ì™„ë£Œ)
- **ì‘ë‹µ ì‹œê°„ ë‹¨ì¶•**: 78% ì„±ëŠ¥ í–¥ìƒ (10.05ì´ˆ â†’ 2.21ì´ˆ)
- **ë³‘ë ¬ ì²˜ë¦¬**: ì •í™• ê²€ìƒ‰ê³¼ ì˜ë¯¸ ê²€ìƒ‰ ë™ì‹œ ì‹¤í–‰
- **í†µí•© ìºì‹±**: ë‹¤ì¸µ ìºì‹±ìœ¼ë¡œ ì‘ë‹µ ì†ë„ ìµœì í™”
- **ë©”ëª¨ë¦¬ íš¨ìœ¨ì„±**: Float16 ì–‘ìí™”ë¡œ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ 50% ê°ì†Œ

### Phase 6: ì˜ë¯¸ì  ê²€ìƒ‰ ê³ ë„í™” (2025-01-10 ì§„í–‰ ì¤‘)
- **FAISS ê¸°ë°˜ ë²¡í„° ê²€ìƒ‰**: ê³ ì„±ëŠ¥ ì˜ë¯¸ì  ê²€ìƒ‰ ì—”ì§„
- **ë‹¤ì¤‘ ëª¨ë¸ ì§€ì›**: ko-sroberta-multitask, BGE-M3-Korean í†µí•©
- **ê²€ìƒ‰ í’ˆì§ˆ í–¥ìƒ**: ìœ ì‚¬ë„ ì ìˆ˜ ê¸°ë°˜ ì •í™•í•œ ë§¤ì¹­
- **ë©”íƒ€ë°ì´í„° í†µí•©**: ë²•ë¥  ë¬¸ì„œì˜ ìƒì„¸ ì •ë³´ì™€ ê²€ìƒ‰ ê²°ê³¼ ì—°ë™

### Phase 7: í†µí•© ìŠ¤í¬ë¦½íŠ¸ ê´€ë¦¬ ì‹œìŠ¤í…œ (2025-10-22 ì™„ë£Œ)
- **ìŠ¤í¬ë¦½íŠ¸ í†µí•©**: 244ê°œ ê°œë³„ ìŠ¤í¬ë¦½íŠ¸ë¥¼ 4ê°œ í•µì‹¬ ë§¤ë‹ˆì €ë¡œ í†µí•©
- **í’ˆì§ˆ ê°œì„  ìë™í™”**: Assembly Articles í…Œì´ë¸” í’ˆì§ˆ ê°œì„  ê¸°ëŠ¥ í†µí•©
- **ë²¡í„° í…ŒìŠ¤íŠ¸ í†µí•©**: FAISS ê¸°ë°˜ ë²¡í„° ì„ë² ë”© ê²€ìƒ‰ í…ŒìŠ¤íŠ¸ ì‹œìŠ¤í…œ
- **ì‹œë§¨í‹± ê²€ìƒ‰ í…ŒìŠ¤íŠ¸**: ì˜ë¯¸ì  ê²€ìƒ‰ ì—”ì§„ ê²€ì¦ ë° ì„±ëŠ¥ ì¸¡ì •
- **í‘œì¤€í™”ëœ ê´€ë¦¬**: í†µí•© ë¡œê¹…, ì—ëŸ¬ í•¸ë“¤ë§, ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
- **ìë™ ê²€ì¦**: ëª¨ë“  í†µí•© ê¸°ëŠ¥ì˜ ìë™ í…ŒìŠ¤íŠ¸ ë° ê²€ì¦ ì‹œìŠ¤í…œ

## ìƒˆë¡œìš´ ì„œë¹„ìŠ¤ êµ¬ì¡° (2025-01-18)

### ê¸°ëŠ¥ë³„ ë¶„ë¦¬ëœ ì„œë¹„ìŠ¤ êµ¬ì¡°

```
source/
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ chat/                   # ì±„íŒ… ê´€ë ¨ ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ enhanced_chat_service.py    # Enhanced Chat Service (2,497ë¼ì¸)
â”‚   â”‚   â”œâ”€â”€ chat_service.py            # ê¸°ë³¸ ì±„íŒ… ì„œë¹„ìŠ¤
â”‚   â”‚   â””â”€â”€ optimized_chat_service.py  # ìµœì í™”ëœ ì±„íŒ… ì„œë¹„ìŠ¤
â”‚   â”œâ”€â”€ search/                 # ê²€ìƒ‰ ê´€ë ¨ ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ unified_search_engine.py   # í†µí•© ê²€ìƒ‰ ì—”ì§„
â”‚   â”‚   â”œâ”€â”€ search_service.py          # ML ê°•í™” ê²€ìƒ‰ ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ rag_service.py             # RAG ì„œë¹„ìŠ¤
â”‚   â”‚   â””â”€â”€ hybrid_search_engine.py    # í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰
â”‚   â”œâ”€â”€ analysis/               # ë¶„ì„ ê´€ë ¨ ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ question_classifier.py     # ì§ˆë¬¸ ë¶„ë¥˜ê¸°
â”‚   â”‚   â””â”€â”€ emotion_intent_analyzer.py # ê°ì •/ì˜ë„ ë¶„ì„
â”‚   â”œâ”€â”€ memory/                 # ë©”ëª¨ë¦¬ ê´€ë¦¬ ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ contextual_memory_manager.py # ë§¥ë½ì  ë©”ëª¨ë¦¬ ê´€ë¦¬
â”‚   â”‚   â””â”€â”€ integrated_session_manager.py # í†µí•© ì„¸ì…˜ ê´€ë¦¬
â”‚   â””â”€â”€ optimization/           # ìµœì í™” ì„œë¹„ìŠ¤
â”‚       â”œâ”€â”€ performance_monitor.py     # ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
â”‚       â””â”€â”€ integrated_cache_system.py # í†µí•© ìºì‹œ ì‹œìŠ¤í…œ
â”œâ”€â”€ data/                       # ë°ì´í„° ì²˜ë¦¬
â”‚   â”œâ”€â”€ database.py            # ë°ì´í„°ë² ì´ìŠ¤ ê´€ë¦¬
â”‚   â”œâ”€â”€ vector_store.py        # ë²¡í„° ì €ì¥ì†Œ
â”‚   â””â”€â”€ data_processor.py      # ë°ì´í„° ì²˜ë¦¬ê¸°
â”œâ”€â”€ models/                     # AI ëª¨ë¸
â”‚   â”œâ”€â”€ model_manager.py       # ëª¨ë¸ ê´€ë¦¬ì
â”‚   â””â”€â”€ kobart_model.py        # KoBART ëª¨ë¸
â”œâ”€â”€ api/                        # API ê´€ë ¨
â”‚   â”œâ”€â”€ endpoints.py           # API ì—”ë“œí¬ì¸íŠ¸
â”‚   â”œâ”€â”€ middleware.py          # ë¯¸ë“¤ì›¨ì–´
â”‚   â””â”€â”€ schemas.py             # ë°ì´í„° ìŠ¤í‚¤ë§ˆ
â””â”€â”€ utils/                      # ìœ í‹¸ë¦¬í‹°
    â”œâ”€â”€ config.py              # ì„¤ì • ê´€ë¦¬
    â”œâ”€â”€ logger.py              # ë¡œê¹… ì‹œìŠ¤í…œ
    â”œâ”€â”€ validation/             # ì…ë ¥ ê²€ì¦
    â”œâ”€â”€ security/               # ë³´ì•ˆ ê´€ë ¨
    â””â”€â”€ monitoring/             # ëª¨ë‹ˆí„°ë§
```

### ê°œì„ ëœ ì„œë¹„ìŠ¤ íŠ¹ì§•

#### 1. ì˜ì¡´ì„± ì£¼ì… ê°œì„ 
```python
# ê¸°ì¡´ êµ¬ì¡°
class MLEnhancedSearchService:
    def __init__(self, config: Config, database: DatabaseManager,
                 vector_store: VectorStore, model_manager: LegalModelManager):

# ê°œì„ ëœ êµ¬ì¡°
class MLEnhancedSearchService:
    def __init__(self, config: Config = None, database: DatabaseManager = None,
                 vector_store: VectorStore = None, model_manager: LegalModelManager = None):
        # ê¸°ë³¸ê°’ìœ¼ë¡œ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
        if config is None:
            config = Config()
        # ... ê¸°íƒ€ ì˜ì¡´ì„± ì´ˆê¸°í™”
```

#### 2. í†µí•© ì¸í„°í˜ì´ìŠ¤ ì œê³µ
```python
# ìƒˆë¡œìš´ í†µí•© ë©”ì„œë“œ
def search(self, query: str, max_results: int = 10, search_type: str = "hybrid") -> Dict[str, Any]:
    """í†µí•© ê²€ìƒ‰ ë©”ì„œë“œ (ê°„í¸í•œ ì¸í„°í˜ì´ìŠ¤)"""
    try:
        results = self.search_documents(query, search_type, max_results)
        return {
            "query": query,
            "results": results,
            "total_count": len(results),
            "search_type": search_type,
            "max_results": max_results,
            "success": True
        }
    except Exception as e:
        return {
            "query": query,
            "results": [],
            "total_count": 0,
            "search_type": search_type,
            "max_results": max_results,
            "success": False,
            "error": str(e)
        }
```

#### 3. í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•œ êµ¬ì¡°
- **Mock ê°ì²´ ì£¼ì…**: í…ŒìŠ¤íŠ¸ ì‹œ Mock ê°ì²´ë¡œ ì˜ì¡´ì„± ì£¼ì… ê°€ëŠ¥
- **ê¸°ë³¸ê°’ ì œê³µ**: ì˜ì¡´ì„± ì—†ì´ë„ ì„œë¹„ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ê°€ëŠ¥
- **ê²©ë¦¬ëœ í…ŒìŠ¤íŠ¸**: ê° ì„œë¹„ìŠ¤ë¥¼ ë…ë¦½ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥

## API ì—”ë“œí¬ì¸íŠ¸

### ê¸°ë³¸ ì •ë³´
- **Base URL**: `http://localhost:8000/api/v1`
- **Content-Type**: `application/json`
- **ì¸ì¦**: í˜„ì¬ ì¸ì¦ ë¶ˆí•„ìš” (í–¥í›„ ì¶”ê°€ ì˜ˆì •)

## í•µì‹¬ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ ì‹œìŠ¤í…œ (2025-01-18)

### í…ŒìŠ¤íŠ¸ ì™„ë£Œ í˜„í™©
- **í…ŒìŠ¤íŠ¸ ì™„ë£Œì¼**: 2025-01-18
- **í…ŒìŠ¤íŠ¸ ì„±ê³µë¥ **: 100% (7/7 í†µê³¼)
- **í…ŒìŠ¤íŠ¸ ëŒ€ìƒ**: í•µì‹¬ ì„œë¹„ìŠ¤ 7ê°œ

### í…ŒìŠ¤íŠ¸ëœ ì„œë¹„ìŠ¤
1. âœ… **DatabaseManager**: ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ë° ì¿¼ë¦¬ ì‹¤í–‰
2. âœ… **VectorStore**: ë²¡í„° ì €ì¥ì†Œ ë¡œë”© ë° ê²€ìƒ‰
3. âœ… **LegalModelManager**: ëª¨ë¸ ë¡œë”© ë° ì‘ë‹µ ìƒì„±
4. âœ… **MLEnhancedSearchService**: ê²€ìƒ‰ ê¸°ëŠ¥ ë° ê²°ê³¼ ë°˜í™˜
5. âœ… **MLEnhancedRAGService**: RAG ê¸°ëŠ¥ ë° ì‘ë‹µ ìƒì„±
6. âœ… **LegalDataProcessor**: ë°ì´í„° ì²˜ë¦¬ ë° ì „ì—­ ì¸ìŠ¤í„´ìŠ¤
7. âœ… **Config**: ì„¤ì • ë¡œë”© ë° í™˜ê²½ ë³€ìˆ˜ ì²˜ë¦¬

### í…ŒìŠ¤íŠ¸ ê²°ê³¼ ì˜ˆì‹œ
```
============================================================
LawFirmAI í•µì‹¬ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
============================================================

í…ŒìŠ¤íŠ¸ ê²°ê³¼:
âœ… DatabaseManager: PASS - ë°ì´í„°ë² ì´ìŠ¤ ê´€ë¦¬ì í…ŒìŠ¤íŠ¸ ì„±ê³µ: 1ê°œ ê²°ê³¼
âœ… VectorStore: PASS - ë²¡í„° ì €ì¥ì†Œ í…ŒìŠ¤íŠ¸ ì„±ê³µ: 0ê°œ ê²°ê³¼
âœ… LegalModelManager: PASS - ëª¨ë¸ ê´€ë¦¬ì í…ŒìŠ¤íŠ¸ ì„±ê³µ: 50ì ì‘ë‹µ ìƒì„±
âœ… MLEnhancedSearchService: PASS - ê²€ìƒ‰ ì„œë¹„ìŠ¤ í…ŒìŠ¤íŠ¸ ì„±ê³µ: 0ê°œ ê²°ê³¼
âœ… MLEnhancedRAGService: PASS - RAG ì„œë¹„ìŠ¤ í…ŒìŠ¤íŠ¸ ì„±ê³µ: 100ì ì‘ë‹µ ìƒì„±
âœ… LegalDataProcessor: PASS - ë°ì´í„° ì²˜ë¦¬ê¸° í…ŒìŠ¤íŠ¸ ì„±ê³µ: 3ê°œ í•„ë“œ ì²˜ë¦¬
âœ… Config: PASS - ì„¤ì • ê´€ë¦¬ì í…ŒìŠ¤íŠ¸ ì„±ê³µ: DB=sqlite:///./data/lawfirm.db, Model=./models

í…ŒìŠ¤íŠ¸ ê²°ê³¼: 7/7 í†µê³¼ (100.0%)
ğŸ‰ ëª¨ë“  í•µì‹¬ ê¸°ëŠ¥ì´ ì •ìƒ ì‘ë™í•©ë‹ˆë‹¤!
```

### í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ë°©ë²•
```bash
# í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ì—ì„œ ì‹¤í–‰
cd LawFirmAI
python test_core_functions.py
```

## í†µí•© ìŠ¤í¬ë¦½íŠ¸ ê´€ë¦¬ ì‹œìŠ¤í…œ

### ê°œìš”
LawFirmAIì˜ í†µí•© ìŠ¤í¬ë¦½íŠ¸ ê´€ë¦¬ ì‹œìŠ¤í…œì€ ê¸°ì¡´ì˜ 244ê°œ ê°œë³„ ìŠ¤í¬ë¦½íŠ¸ë¥¼ 4ê°œ í•µì‹¬ ë§¤ë‹ˆì €ë¡œ í†µí•©í•˜ì—¬ ê´€ë¦¬ íš¨ìœ¨ì„±ì„ í¬ê²Œ í–¥ìƒì‹œì¼°ìŠµë‹ˆë‹¤.

### í•µì‹¬ ë§¤ë‹ˆì €

#### 1. UnifiedRebuildManager (í†µí•© ë°ì´í„°ë² ì´ìŠ¤ ì¬êµ¬ì¶• ë§¤ë‹ˆì €)
- **ìœ„ì¹˜**: `scripts/core/unified_rebuild_manager.py`
- **ê¸°ëŠ¥**: ë°ì´í„°ë² ì´ìŠ¤ ì¬êµ¬ì¶• ë° í’ˆì§ˆ ê°œì„ 
- **ì§€ì› ëª¨ë“œ**: full, real, simple, incremental, quality_fix

#### 2. UnifiedVectorManager (í†µí•© ë²¡í„° ì„ë² ë”© ë§¤ë‹ˆì €)
- **ìœ„ì¹˜**: `scripts/core/unified_vector_manager.py`
- **ê¸°ëŠ¥**: ë²¡í„° ì„ë² ë”© ìƒì„± ë° ê´€ë¦¬
- **ì§€ì› ëª¨ë“œ**: full, incremental, cpu_optimized, resumable

#### 3. UnifiedTestSuite (í†µí•© í…ŒìŠ¤íŠ¸ ìŠ¤ìœ„íŠ¸)
- **ìœ„ì¹˜**: `scripts/testing/unified_test_suite.py`
- **ê¸°ëŠ¥**: ë‹¤ì–‘í•œ í…ŒìŠ¤íŠ¸ íƒ€ì… ì‹¤í–‰ ë° ê²€ì¦
- **ì§€ì› íƒ€ì…**: validation, performance, integration, vector_embedding, semantic_search

#### 4. BaseManager (ê¸°ë³¸ ë§¤ë‹ˆì €)
- **ìœ„ì¹˜**: `scripts/core/base_manager.py`
- **ê¸°ëŠ¥**: ê³µí†µ ìœ í‹¸ë¦¬í‹° ë° í‘œì¤€í™”ëœ ê´€ë¦¬ ê¸°ëŠ¥
- **êµ¬ì„±ìš”ì†Œ**: ë¡œê¹…, ì—ëŸ¬ ì²˜ë¦¬, ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§, ì„¤ì • ê´€ë¦¬

### 1. ì±„íŒ… API

#### `POST /api/v1/chat`

ê¸°ë³¸ ì±„íŒ… ì—”ë“œí¬ì¸íŠ¸ (ë ˆê±°ì‹œ í˜¸í™˜ì„±)

**ìš”ì²­ íŒŒë¼ë¯¸í„°:**
```json
{
  "message": "ë¯¼ë²• ì œ750ì¡°ì— ëŒ€í•´ ì„¤ëª…í•´ì£¼ì„¸ìš”",
  "context": "ì¶”ê°€ ì»¨í…ìŠ¤íŠ¸ (ì„ íƒì‚¬í•­)",
  "session_id": "session_20241220_143022"
}
```

**ì‘ë‹µ:**
```json
{
  "response": "ë¯¼ë²• ì œ750ì¡°ëŠ” ë¶ˆë²•í–‰ìœ„ë¡œ ì¸í•œ ì†í•´ë°°ìƒ ì±…ì„ì„ ê·œì •í•˜ëŠ” ì¤‘ìš”í•œ ì¡°ë¬¸ì…ë‹ˆë‹¤...",
  "confidence": 0.85,
  "sources": ["ë¯¼ë²• ì œ750ì¡°", "ëŒ€ë²•ì› íŒë¡€ 2020ë‹¤12345"],
  "processing_time": 1.2,
  "session_id": "session_20241220_143022",
  "question_type": "law_inquiry",
  "legal_references": ["ë¯¼ë²• ì œ750ì¡°"],
  "processing_steps": ["ì§ˆë¬¸ë¶„ë¥˜", "ê²€ìƒ‰", "ë‹µë³€ìƒì„±"],
  "metadata": {
    "entities": ["ë¯¼ë²•", "ì œ750ì¡°", "ì†í•´ë°°ìƒ"],
    "topics": ["ë¶ˆë²•í–‰ìœ„", "ì†í•´ë°°ìƒ"]
  },
  "errors": []
}
```

#### `POST /api/v1/chat/ml-enhanced`

ML ê°•í™” ì±„íŒ… ì—”ë“œí¬ì¸íŠ¸ (Phase 1-3 í†µí•©)

**ìš”ì²­ íŒŒë¼ë¯¸í„°:**
```json
{
  "message": "ë¯¼ë²• ì œ750ì¡°ì— ëŒ€í•´ ì„¤ëª…í•´ì£¼ì„¸ìš”",
  "context": "ì¶”ê°€ ì»¨í…ìŠ¤íŠ¸ (ì„ íƒì‚¬í•­)",
  "session_id": "session_20241220_143022",
  "user_id": "user123",
  "enable_phases": {
    "phase1": true,
    "phase2": true,
    "phase3": true
  }
}
```

**ì‘ë‹µ:**
```json
{
  "response": "ë¯¼ë²• ì œ750ì¡°ëŠ” ë¶ˆë²•í–‰ìœ„ë¡œ ì¸í•œ ì†í•´ë°°ìƒ ì±…ì„ì„ ê·œì •í•˜ëŠ” ì¤‘ìš”í•œ ì¡°ë¬¸ì…ë‹ˆë‹¤...",
  "confidence": 0.85,
  "sources": ["ë¯¼ë²• ì œ750ì¡°", "ëŒ€ë²•ì› íŒë¡€ 2020ë‹¤12345"],
  "processing_time": 1.2,
  "session_id": "session_20241220_143022",
  "user_id": "user123",
  "question_type": "law_inquiry",
  "legal_references": ["ë¯¼ë²• ì œ750ì¡°"],
  "processing_steps": ["ì§ˆë¬¸ë¶„ë¥˜", "ê²€ìƒ‰", "ë‹µë³€ìƒì„±"],
  "metadata": {
    "entities": ["ë¯¼ë²•", "ì œ750ì¡°", "ì†í•´ë°°ìƒ"],
    "topics": ["ë¶ˆë²•í–‰ìœ„", "ì†í•´ë°°ìƒ"]
  },
  "errors": [],
  "phase_info": {
    "phase1": {
      "enabled": true,
      "context": {...},
      "multi_turn_result": {...},
      "compression_info": {...}
    },
    "phase2": {
      "enabled": true,
      "personalized_context": {...},
      "emotion_intent_info": {...},
      "flow_tracking_info": {...}
    },
    "phase3": {
      "enabled": true,
      "memory_search_results": [...],
      "quality_assessment": {...}
    }
  },
  "quality_assessment": {
    "overall_score": 0.82,
    "completeness_score": 0.85,
    "satisfaction_score": 0.80,
    "accuracy_score": 0.81,
    "issues": [],
    "suggestions": []
  },
  "performance_info": {
    "processing_time": 1.2,
    "cache_hit_rate": 0.75,
    "from_cache": false,
    "memory_usage_mb": 256.5
  }
}
```

#### `POST /api/v1/chat/intelligent`

ì§€ëŠ¥í˜• ì±„íŒ… ì—”ë“œí¬ì¸íŠ¸ (ìµœì‹  ë²„ì „)

**ìš”ì²­ íŒŒë¼ë¯¸í„°:**
```json
{
  "message": "ë¯¼ë²• ì œ750ì¡°ì— ëŒ€í•´ ì„¤ëª…í•´ì£¼ì„¸ìš”",
  "context": "ì¶”ê°€ ì»¨í…ìŠ¤íŠ¸ (ì„ íƒì‚¬í•­)",
  "session_id": "session_20241220_143022",
  "user_id": "user123",
  "options": {
    "enable_emotion_analysis": true,
    "enable_intent_analysis": true,
    "enable_flow_tracking": true,
    "enable_quality_monitoring": true
  }
}
```

**ì‘ë‹µ:**
```json
{
  "response": "ë¯¼ë²• ì œ750ì¡°ëŠ” ë¶ˆë²•í–‰ìœ„ë¡œ ì¸í•œ ì†í•´ë°°ìƒ ì±…ì„ì„ ê·œì •í•˜ëŠ” ì¤‘ìš”í•œ ì¡°ë¬¸ì…ë‹ˆë‹¤...",
  "confidence": 0.85,
  "sources": ["ë¯¼ë²• ì œ750ì¡°", "ëŒ€ë²•ì› íŒë¡€ 2020ë‹¤12345"],
  "processing_time": 1.2,
  "session_id": "session_20241220_143022",
  "user_id": "user123",
  "question_type": "law_inquiry",
  "legal_references": ["ë¯¼ë²• ì œ750ì¡°"],
  "processing_steps": ["ì§ˆë¬¸ë¶„ë¥˜", "ê²€ìƒ‰", "ë‹µë³€ìƒì„±"],
  "metadata": {
    "entities": ["ë¯¼ë²•", "ì œ750ì¡°", "ì†í•´ë°°ìƒ"],
    "topics": ["ë¶ˆë²•í–‰ìœ„", "ì†í•´ë°°ìƒ"]
  },
  "errors": [],
  "intelligent_features": {
    "emotion_analysis": {
      "emotion": "neutral",
      "urgency": "normal",
      "confidence": 0.8
    },
    "intent_analysis": {
      "intent": "question",
      "confidence": 0.9
    },
    "flow_tracking": {
      "predicted_next_intent": "follow_up_question",
      "suggested_questions": ["ì†í•´ë°°ìƒ ì²­êµ¬ ì ˆì°¨ëŠ”?", "ì†í•´ë°°ìƒ ë²”ìœ„ëŠ”?"]
    },
    "quality_monitoring": {
      "completeness_score": 0.85,
      "satisfaction_score": 0.80,
      "accuracy_score": 0.81
    }
  },
  "warnings": [],
  "recommendations": []
}
```

### 2. ê²€ìƒ‰ API

#### `POST /api/v1/search`

ML ê°•í™” ê²€ìƒ‰ ì—”ë“œí¬ì¸íŠ¸

**ìš”ì²­ íŒŒë¼ë¯¸í„°:**
```json
{
  "query": "ì†í•´ë°°ìƒ ê´€ë ¨ íŒë¡€",
  "search_type": "hybrid",
  "limit": 10,
  "filters": {
    "law_type": "ë¯¼ë²•",
    "date_range": {
      "start": "2020-01-01",
      "end": "2024-12-31"
    }
  }
}
```

**ì‘ë‹µ:**
```json
{
  "results": [
    {
      "id": "case_001",
      "title": "ì†í•´ë°°ìƒ ê´€ë ¨ ëŒ€ë²•ì› íŒë¡€",
      "content": "íŒë¡€ ë‚´ìš©...",
      "source": "ëŒ€ë²•ì› íŒë¡€ 2020ë‹¤12345",
      "relevance_score": 0.95,
      "search_method": "semantic"
    }
  ],
  "total_count": 1,
  "search_type": "hybrid",
  "ml_enhanced": true,
  "processing_time": 0.5
}
```

#### `POST /api/v1/search/semantic` (ì‹ ê·œ)

ì˜ë¯¸ì  ê²€ìƒ‰ ì „ìš© ì—”ë“œí¬ì¸íŠ¸ (Phase 6)

**ìš”ì²­ íŒŒë¼ë¯¸í„°:**
```json
{
  "query": "ê³„ì•½ í•´ì§€ ì¡°ê±´",
  "model": "ko-sroberta-multitask",
  "limit": 10,
  "similarity_threshold": 0.7,
  "include_metadata": true
}
```

**ì‘ë‹µ:**
```json
{
  "results": [
    {
      "text": "ê³„ì•½ í•´ì§€ ì¡°ê±´ì— ëŒ€í•œ ë²•ë¥  ì¡°ë¬¸...",
      "score": 0.92,
      "similarity_type": "semantic",
      "metadata": {
        "law_name": "ë¯¼ë²•",
        "article_number": "ì œ543ì¡°",
        "document_type": "law",
        "category": "contract"
      }
    }
  ],
  "total_count": 1,
  "search_time": 0.043,
  "model_used": "ko-sroberta-multitask",
  "average_score": 0.92
}
```

#### `GET /api/v1/search/suggestions`

ê²€ìƒ‰ ì œì•ˆ ì—”ë“œí¬ì¸íŠ¸

**ìš”ì²­ íŒŒë¼ë¯¸í„°:**
- `query`: ê²€ìƒ‰ ì¿¼ë¦¬ (í•„ìˆ˜)
- `limit`: ì œì•ˆ ê°œìˆ˜ (ê¸°ë³¸ê°’: 5, ìµœëŒ€: 10)

**ì‘ë‹µ:**
```json
{
  "suggestions": [
    "ì†í•´ë°°ìƒ ì²­êµ¬ ì ˆì°¨",
    "ì†í•´ë°°ìƒ ë²”ìœ„",
    "ì†í•´ë°°ìƒ ê³„ì‚° ë°©ë²•"
  ],
  "query": "ì†í•´ë°°ìƒ",
  "total_count": 3
}
```

### 3. ë²•ë¥  ì—”í‹°í‹° API

#### `POST /api/v1/legal-entities`

ë²•ë¥  ì—”í‹°í‹° ì¶”ì¶œ ì—”ë“œí¬ì¸íŠ¸

**ìš”ì²­ íŒŒë¼ë¯¸í„°:**
```json
{
  "query": "ë¯¼ë²• ì œ750ì¡° ë¶ˆë²•í–‰ìœ„ ì†í•´ë°°ìƒ"
}
```

**ì‘ë‹µ:**
```json
{
  "laws": ["ë¯¼ë²•"],
  "articles": ["ì œ750ì¡°"],
  "cases": ["ëŒ€ë²•ì› íŒë¡€ 2020ë‹¤12345"],
  "supplementary": ["ë¶ˆë²•í–‰ìœ„", "ì†í•´ë°°ìƒ"]
}
```

### 4. ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ API

#### `GET /api/v1/performance/metrics`

ì„±ëŠ¥ ì§€í‘œ ì¡°íšŒ ì—”ë“œí¬ì¸íŠ¸

**ì‘ë‹µ:**
```json
{
  "metrics": {
    "average_response_time": 1.2,
    "cache_hit_rate": 0.75,
    "memory_usage_mb": 256.5,
    "active_sessions": 15,
    "total_requests": 1250
  },
  "timestamp": "2024-12-20T14:30:22Z"
}
```

#### `GET /api/v1/performance/health`

ì‹œìŠ¤í…œ ìƒíƒœ í™•ì¸ ì—”ë“œí¬ì¸íŠ¸

**ì‘ë‹µ:**
```json
{
  "status": "healthy",
  "services": {
    "database": "healthy",
    "vector_store": "healthy",
    "ml_models": "healthy",
    "cache": "healthy"
  },
  "timestamp": "2024-12-20T14:30:22Z"
}
```

### 5. í”¼ë“œë°± API

#### `POST /api/v1/feedback`

ì‚¬ìš©ì í”¼ë“œë°± ìˆ˜ì§‘ ì—”ë“œí¬ì¸íŠ¸

**ìš”ì²­ íŒŒë¼ë¯¸í„°:**
```json
{
  "session_id": "session_20241220_143022",
  "user_id": "user123",
  "feedback_type": "rating",
  "rating": 5,
  "comment": "ë§¤ìš° ë„ì›€ì´ ë˜ì—ˆìŠµë‹ˆë‹¤."
}
```

**ì‘ë‹µ:**
```json
{
  "feedback_id": "feedback_001",
  "status": "received",
  "timestamp": "2024-12-20T14:30:22Z"
}
```

#### `GET /api/v1/feedback/analysis`

í”¼ë“œë°± ë¶„ì„ ê²°ê³¼ ì¡°íšŒ ì—”ë“œí¬ì¸íŠ¸

**ì‘ë‹µ:**
```json
{
  "analysis": {
    "average_rating": 4.2,
    "total_feedback": 150,
    "positive_feedback": 120,
    "negative_feedback": 30,
    "common_issues": ["ì‘ë‹µ ì†ë„", "ì •í™•ì„±"],
    "improvement_suggestions": ["ìºì‹œ ìµœì í™”", "ëª¨ë¸ ì—…ë°ì´íŠ¸"]
  },
  "timestamp": "2024-12-20T14:30:22Z"
}
```

```

## ì—ëŸ¬ ì½”ë“œ

### HTTP ìƒíƒœ ì½”ë“œ

| ì½”ë“œ | ì„¤ëª… | í•´ê²° ë°©ë²• |
|------|------|----------|
| 200 | ì„±ê³µ | - |
| 400 | ì˜ëª»ëœ ìš”ì²­ | ìš”ì²­ íŒŒë¼ë¯¸í„° í™•ì¸ |
| 401 | ì¸ì¦ ì‹¤íŒ¨ | API í‚¤ í™•ì¸ (í–¥í›„ ì ìš©) |
| 404 | ë¦¬ì†ŒìŠ¤ ì—†ìŒ | ì—”ë“œí¬ì¸íŠ¸ URL í™•ì¸ |
| 500 | ì„œë²„ ì˜¤ë¥˜ | ì„œë²„ ë¡œê·¸ í™•ì¸ |

### ì—ëŸ¬ ì‘ë‹µ í˜•ì‹

```json
{
  "error": {
    "code": "INVALID_REQUEST",
    "message": "ìš”ì²­ íŒŒë¼ë¯¸í„°ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.",
    "details": {
      "field": "message",
      "issue": "í•„ìˆ˜ í•„ë“œê°€ ëˆ„ë½ë˜ì—ˆìŠµë‹ˆë‹¤."
    }
  },
  "timestamp": "2024-12-20T14:30:22Z"
}
```

## ì‚¬ìš© ì˜ˆì œ

### Python ì˜ˆì œ

```python
import requests
import json

# ê¸°ë³¸ ì±„íŒ… API ì‚¬ìš©
def chat_with_lawfirm_ai(message, session_id=None):
    url = "http://localhost:8000/api/v1/chat"
    data = {
        "message": message,
        "session_id": session_id
    }
    
    response = requests.post(url, json=data)
    return response.json()

# ML ê°•í™” ì±„íŒ… API ì‚¬ìš©
def ml_enhanced_chat(message, user_id, session_id=None):
    url = "http://localhost:8000/api/v1/chat/ml-enhanced"
    data = {
        "message": message,
        "user_id": user_id,
        "session_id": session_id,
        "enable_phases": {
            "phase1": True,
            "phase2": True,
            "phase3": True
        }
    }
    
    response = requests.post(url, json=data)
    return response.json()

# ì‚¬ìš© ì˜ˆì œ
result = chat_with_lawfirm_ai("ë¯¼ë²• ì œ750ì¡°ì— ëŒ€í•´ ì„¤ëª…í•´ì£¼ì„¸ìš”")
print(result["response"])
```

### JavaScript ì˜ˆì œ

```javascript
// ê¸°ë³¸ ì±„íŒ… API ì‚¬ìš©
async function chatWithLawFirmAI(message, sessionId = null) {
    const response = await fetch('http://localhost:8000/api/v1/chat', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({
            message: message,
            session_id: sessionId
        })
    });
    
    return await response.json();
}

// ML ê°•í™” ì±„íŒ… API ì‚¬ìš©
async function mlEnhancedChat(message, userId, sessionId = null) {
    const response = await fetch('http://localhost:8000/api/v1/chat/ml-enhanced', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({
            message: message,
            user_id: userId,
            session_id: sessionId,
            enable_phases: {
                phase1: true,
                phase2: true,
                phase3: true
            }
        })
    });
    
    return await response.json();
}

// ì‚¬ìš© ì˜ˆì œ
chatWithLawFirmAI("ë¯¼ë²• ì œ750ì¡°ì— ëŒ€í•´ ì„¤ëª…í•´ì£¼ì„¸ìš”")
    .then(result => console.log(result.response));
```

## ì„±ëŠ¥ ìµœì í™” íŒ

### 1. ìºì‹œ í™œìš©
- ë™ì¼í•œ ì§ˆë¬¸ì— ëŒ€í•´ì„œëŠ” ìºì‹œëœ ì‘ë‹µì„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤
- `performance_info.from_cache` í•„ë“œë¡œ ìºì‹œ ì‚¬ìš© ì—¬ë¶€ í™•ì¸ ê°€ëŠ¥

### 2. ì„¸ì…˜ ê´€ë¦¬
- `session_id`ë¥¼ ì‚¬ìš©í•˜ì—¬ ëŒ€í™” ë§¥ë½ì„ ìœ ì§€í•˜ì„¸ìš”
- ì„¸ì…˜ì„ ì¬ì‚¬ìš©í•˜ë©´ ë” ë‚˜ì€ ì‘ë‹µì„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤

### 3. Phase ê¸°ëŠ¥ í™œìš©
- Phase 1-3 ê¸°ëŠ¥ì„ ì ì ˆíˆ í™œìš©í•˜ì—¬ ë” ì •í™•í•œ ì‘ë‹µì„ ë°›ìœ¼ì„¸ìš”
- ì‚¬ìš©ì í”„ë¡œí•„ì„ ì„¤ì •í•˜ì—¬ ê°œì¸í™”ëœ ì‘ë‹µì„ ë°›ìœ¼ì„¸ìš”

### 4. ì—ëŸ¬ ì²˜ë¦¬
- ì ì ˆí•œ ì—ëŸ¬ ì²˜ë¦¬ë¥¼ êµ¬í˜„í•˜ì—¬ ì‚¬ìš©ì ê²½í—˜ì„ í–¥ìƒì‹œí‚¤ì„¸ìš”
- ì¬ì‹œë„ ë¡œì§ì„ êµ¬í˜„í•˜ì—¬ ì¼ì‹œì ì¸ ì˜¤ë¥˜ë¥¼ ì²˜ë¦¬í•˜ì„¸ìš”

---


#### `POST /api/user/profile/{user_id}`

ì‚¬ìš©ì í”„ë¡œí•„ì„ ìƒì„±í•˜ê±°ë‚˜ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.

**ìš”ì²­ íŒŒë¼ë¯¸í„°:**
```json
{
  "expertise_level": "advanced",
  "preferred_detail_level": "detailed",
  "interest_areas": ["ë¯¼ë²•", "í˜•ë²•", "ìƒë²•"],
  "preferences": {
    "response_style": "formal",
    "include_precedents": true
  }
}
```

### 3. ì„¸ì…˜ ê´€ë¦¬

#### `GET /api/sessions/{user_id}`

ì‚¬ìš©ìì˜ ì„¸ì…˜ ëª©ë¡ì„ ì¡°íšŒí•©ë‹ˆë‹¤.

**ì‘ë‹µ:**
```json
{
  "sessions": [
    {
      "session_id": "session_20241220_143022",
      "created_at": "2024-12-20T14:30:22Z",
      "last_updated": "2024-12-20T15:45:30Z",
      "turn_count": 5,
      "topics": ["ë¯¼ë²•", "ì†í•´ë°°ìƒ"],
      "summary": "ë¯¼ë²• ì œ750ì¡° ê´€ë ¨ ì§ˆë¬¸ë“¤"
    }
  ]
}
```

#### `GET /api/sessions/{session_id}/details`

íŠ¹ì • ì„¸ì…˜ì˜ ìƒì„¸ ì •ë³´ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.

**ì‘ë‹µ:**
```json
{
  "session_id": "session_20241220_143022",
  "user_id": "user123",
  "turns": [
    {
      "user_query": "ë¯¼ë²• ì œ750ì¡°ì— ëŒ€í•´ ì„¤ëª…í•´ì£¼ì„¸ìš”",
      "bot_response": "ë¯¼ë²• ì œ750ì¡°ëŠ” ë¶ˆë²•í–‰ìœ„ë¡œ ì¸í•œ ì†í•´ë°°ìƒ ì±…ì„ì„ ê·œì •í•©ë‹ˆë‹¤...",
      "timestamp": "2024-12-20T14:30:22Z",
      "question_type": "law_inquiry",
      "entities": {"laws": ["ë¯¼ë²•"], "articles": ["ì œ750ì¡°"]}
    }
  ],
  "entities": {...},
  "topic_stack": ["ë¯¼ë²•", "ì†í•´ë°°ìƒ"],
  "created_at": "2024-12-20T14:30:22Z",
  "last_updated": "2024-12-20T15:45:30Z"
}
```

### 4. ë©”ëª¨ë¦¬ ê´€ë¦¬

#### `GET /api/memory/search`

ê´€ë ¨ ë©”ëª¨ë¦¬ë¥¼ ê²€ìƒ‰í•©ë‹ˆë‹¤.

**ìš”ì²­ íŒŒë¼ë¯¸í„°:**
```json
{
  "query": "ì†í•´ë°°ìƒ ê´€ë ¨ ì§ˆë¬¸",
  "session_id": "session_20241220_143022",
  "user_id": "user123"
}
```

**ì‘ë‹µ:**
```json
{
  "results": [
    {
      "memory_id": "mem_user123_session_20241220_143022_abc123",
      "content": "ë¯¼ë²• ì œ750ì¡°ëŠ” ë¶ˆë²•í–‰ìœ„ë¡œ ì¸í•œ ì†í•´ë°°ìƒ ì±…ì„ì„ ê·œì •í•©ë‹ˆë‹¤",
      "memory_type": "legal_knowledge",
      "importance_score": 0.85,
      "relevance_score": 0.92,
      "match_reason": "ê³µí†µ í‚¤ì›Œë“œ: ì†í•´ë°°ìƒ, ë¯¼ë²•"
    }
  ]
}
```

#### `POST /api/memory/consolidate`

ì‚¬ìš©ìì˜ ë©”ëª¨ë¦¬ë¥¼ í†µí•©í•©ë‹ˆë‹¤.

**ì‘ë‹µ:**
```json
{
  "status": "success",
  "consolidated_count": 3,
  "message": "3ê°œì˜ ì¤‘ë³µ ë©”ëª¨ë¦¬ê°€ í†µí•©ë˜ì—ˆìŠµë‹ˆë‹¤"
}
```

### 5. í’ˆì§ˆ ëª¨ë‹ˆí„°ë§

#### `GET /api/quality/assessment/{session_id}`

ì„¸ì…˜ì˜ í’ˆì§ˆ í‰ê°€ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.

**ì‘ë‹µ:**
```json
{
  "overall_score": 0.82,
  "completeness_score": 0.85,
  "satisfaction_score": 0.80,
  "accuracy_score": 0.81,
  "issues": [],
  "suggestions": [
    "ë‹µë³€ì— ë” êµ¬ì²´ì ì¸ ì˜ˆì‹œë¥¼ í¬í•¨í•˜ì„¸ìš”",
    "ê´€ë ¨ ë²•ë ¹ì´ë‚˜ íŒë¡€ë¥¼ ì¶”ê°€ë¡œ ì–¸ê¸‰í•˜ì„¸ìš”"
  ],
  "assessment_timestamp": "2024-12-20T15:45:30Z"
}
```

#### `GET /api/quality/trends/{user_id}`

ì‚¬ìš©ìì˜ í’ˆì§ˆ íŠ¸ë Œë“œë¥¼ ë¶„ì„í•©ë‹ˆë‹¤.

**ì‘ë‹µ:**
```json
{
  "periods": [
    {
      "period": "2024-12-20",
      "avg_completeness": 0.85,
      "avg_satisfaction": 0.80,
      "avg_accuracy": 0.81,
      "total_sessions": 5,
      "improvement_suggestions": [...]
    }
  ],
  "overall_trend": "improving",
  "key_insights": ["í’ˆì§ˆì´ ì§€ì†ì ìœ¼ë¡œ í–¥ìƒë˜ê³  ìˆìŠµë‹ˆë‹¤"],
  "recommendations": ["í˜„ì¬ ì ‘ê·¼ ë°©ì‹ì„ ìœ ì§€í•˜ì„¸ìš”"]
}
```

### 6. ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§

#### `GET /api/performance/metrics`

ì„±ëŠ¥ ë©”íŠ¸ë¦­ì„ ì¡°íšŒí•©ë‹ˆë‹¤.

**ì‘ë‹µ:**
```json
{
  "timestamp": "2024-12-20T15:45:30Z",
  "performance_monitor": {
    "summary": {
      "period_hours": 24,
      "total_requests": 150,
      "averages": {
        "cpu_usage": 45.2,
        "memory_usage": 62.8,
        "response_time": 1.2,
        "cache_hit_rate": 0.75
      },
      "status": "healthy"
    },
    "system_health": {
      "status": "healthy",
      "system": {
        "cpu_usage": 45.2,
        "memory_usage": 62.8,
        "memory_available_gb": 8.5
      }
    }
  },
  "memory_optimizer": {
    "memory_usage": {
      "total_mb": 16384,
      "used_mb": 10240,
      "available_mb": 6144,
      "percentage": 62.5,
      "process_mb": 256.5
    },
    "memory_trend": {
      "trend": "stable",
      "trend_rate_percent": 2.1,
      "memory_leak_warning": false
    }
  },
  "cache_manager": {
    "cache_size": 150,
    "max_size": 1000,
    "hits": 1200,
    "misses": 400,
    "hit_rate": 0.75
  }
}
```

#### `POST /api/performance/optimize`

ì„±ëŠ¥ ìµœì í™”ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.

**ì‘ë‹µ:**
```json
{
  "timestamp": "2024-12-20T15:45:30Z",
  "actions_taken": [
    "Garbage collection: 45 objects collected",
    "Cache cleanup: 12 entries removed"
  ],
  "memory_optimization": {
    "memory_freed_mb": 15.2,
    "actions_taken": ["Garbage collection: 45 objects collected"]
  },
  "cache_optimization": {
    "cache_cleared": 12,
    "stats_before": {...}
  }
}
```

## ì—ëŸ¬ ì½”ë“œ

| ì½”ë“œ | ì„¤ëª… | í•´ê²° ë°©ë²• |
|------|------|-----------|
| 400 | ì˜ëª»ëœ ìš”ì²­ | ìš”ì²­ íŒŒë¼ë¯¸í„°ë¥¼ í™•ì¸í•˜ì„¸ìš” |
| 401 | ì¸ì¦ ì‹¤íŒ¨ | ìœ íš¨í•œ API í‚¤ë¥¼ ì‚¬ìš©í•˜ì„¸ìš” |
| 404 | ë¦¬ì†ŒìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ | ìš”ì²­í•œ ë¦¬ì†ŒìŠ¤ê°€ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš” |
| 429 | ìš”ì²­ í•œë„ ì´ˆê³¼ | ìš”ì²­ ë¹ˆë„ë¥¼ ì¤„ì´ì„¸ìš” |
| 500 | ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜ | ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš” |

## ì‚¬ìš© ì˜ˆì œ

### Python ì˜ˆì œ

```python
import requests
import json

# ê¸°ë³¸ ì„¤ì •
BASE_URL = "https://api.lawfirmai.com"
API_KEY = "your_api_key_here"
headers = {
    "Authorization": f"Bearer {API_KEY}",
    "Content-Type": "application/json"
}

# ë©”ì‹œì§€ ì „ì†¡
def send_message(message, session_id=None, user_id=None):
    url = f"{BASE_URL}/api/chat"
    data = {
        "message": message,
        "session_id": session_id,
        "user_id": user_id
    }
    
    response = requests.post(url, headers=headers, json=data)
    return response.json()

# ì‚¬ìš©ì í”„ë¡œí•„ ì¡°íšŒ
def get_user_profile(user_id):
    url = f"{BASE_URL}/api/user/profile/{user_id}"
    response = requests.get(url, headers=headers)
    return response.json()

# ì„¸ì…˜ ëª©ë¡ ì¡°íšŒ
def get_user_sessions(user_id):
    url = f"{BASE_URL}/api/sessions/{user_id}"
    response = requests.get(url, headers=headers)
    return response.json()

# ì‚¬ìš© ì˜ˆì œ
if __name__ == "__main__":
    # ë©”ì‹œì§€ ì „ì†¡
    result = send_message(
        "ë¯¼ë²• ì œ750ì¡°ì— ëŒ€í•´ ì„¤ëª…í•´ì£¼ì„¸ìš”",
        session_id="session_20241220_143022",
        user_id="user123"
    )
    print(f"ì‘ë‹µ: {result['response']}")
    print(f"ì‹ ë¢°ë„: {result['confidence']}")
    
    # ì‚¬ìš©ì í”„ë¡œí•„ ì¡°íšŒ
    profile = get_user_profile("user123")
    print(f"ì „ë¬¸ì„± ìˆ˜ì¤€: {profile['expertise_level']}")
    
    # ì„¸ì…˜ ëª©ë¡ ì¡°íšŒ
    sessions = get_user_sessions("user123")
    print(f"ì´ ì„¸ì…˜ ìˆ˜: {len(sessions['sessions'])}")
```

### JavaScript ì˜ˆì œ

```javascript
// ê¸°ë³¸ ì„¤ì •
const BASE_URL = 'https://api.lawfirmai.com';
const API_KEY = 'your_api_key_here';

const headers = {
    'Authorization': `Bearer ${API_KEY}`,
    'Content-Type': 'application/json'
};

// ë©”ì‹œì§€ ì „ì†¡
async function sendMessage(message, sessionId = null, userId = null) {
    const url = `${BASE_URL}/api/chat`;
    const data = {
        message: message,
        session_id: sessionId,
        user_id: userId
    };
    
    const response = await fetch(url, {
        method: 'POST',
        headers: headers,
        body: JSON.stringify(data)
    });
    
    return await response.json();
}

// ì‚¬ìš©ì í”„ë¡œí•„ ì¡°íšŒ
async function getUserProfile(userId) {
    const url = `${BASE_URL}/api/user/profile/${userId}`;
    const response = await fetch(url, {
        method: 'GET',
        headers: headers
    });
    
    return await response.json();
}

// ì‚¬ìš© ì˜ˆì œ
async function example() {
    try {
        // ë©”ì‹œì§€ ì „ì†¡
        const result = await sendMessage(
            'ë¯¼ë²• ì œ750ì¡°ì— ëŒ€í•´ ì„¤ëª…í•´ì£¼ì„¸ìš”',
            'session_20241220_143022',
            'user123'
        );
        console.log('ì‘ë‹µ:', result.response);
        console.log('ì‹ ë¢°ë„:', result.confidence);
        
        // ì‚¬ìš©ì í”„ë¡œí•„ ì¡°íšŒ
        const profile = await getUserProfile('user123');
        console.log('ì „ë¬¸ì„± ìˆ˜ì¤€:', profile.expertise_level);
        
    } catch (error) {
        console.error('ì˜¤ë¥˜ ë°œìƒ:', error);
    }
}

example();
```

## ì œí•œì‚¬í•­

- **ìš”ì²­ í•œë„**: ë¶„ë‹¹ 60íšŒ, ì‹œê°„ë‹¹ 1000íšŒ
- **ë©”ì‹œì§€ ê¸¸ì´**: ìµœëŒ€ 10,000ì
- **ì„¸ì…˜ ìˆ˜**: ì‚¬ìš©ìë‹¹ ìµœëŒ€ 100ê°œ í™œì„± ì„¸ì…˜
- **ë©”ëª¨ë¦¬ ë³´ê´€**: 30ì¼ í›„ ìë™ ì‚­ì œ
- **ìºì‹œ í¬ê¸°**: ìµœëŒ€ 1000ê°œ í•­ëª©
