# κµ­ν λ²•λ¥ μ •λ³΄μ‹μ¤ν… λ°μ΄ν„° μμ§‘ κ°€μ΄λ“

## κ°μ”

κµ­κ°€λ²•λ Ήμ •λ³΄μ„Όν„° APIκ°€ μ„λΉ„μ¤ μ¤‘λ‹¨μΌλ΅ μΈν•΄ κµ­ν λ²•λ¥ μ •λ³΄μ‹μ¤ν…(https://likms.assembly.go.kr/law)μ„ λ€μ•μΌλ΅ μ‚¬μ©ν•μ—¬ λ²•λ¥ κ³Ό νλ΅€ λ°μ΄ν„°λ¥Ό μμ§‘ν•λ” μ‹μ¤ν…μ…λ‹λ‹¤.

## μ£Όμ” νΉμ§•

- **μ›Ή μ¤ν¬λν•‘**: Playwrightλ¥Ό μ‚¬μ©ν• λΈλΌμ°μ € μλ™ν™”
- **μ μ§„μ  μμ§‘**: μ¤‘λ‹¨ μ‹ μ¬κ° κ°€λ¥ν• μ²΄ν¬ν¬μΈνΈ μ‹μ¤ν…
- **λ©”λ¨λ¦¬ κ΄€λ¦¬**: λ€μ©λ‰ λ°μ΄ν„° μ²λ¦¬ μ‹ λ©”λ¨λ¦¬ μ‚¬μ©λ‰ λ¨λ‹ν„°λ§
- **νμ΄μ§€λ³„ μ €μ¥**: κ° νμ΄μ§€μ λ°μ΄ν„°λ¥Ό λ³„λ„ νμΌλ΅ μ €μ¥
- **μ‹μ‘ νμ΄μ§€ μ§€μ •**: νΉμ • νμ΄μ§€λ¶€ν„° μμ§‘ μ‹μ‘ κ°€λ¥
- **μ„±λ¥ μµμ ν™”**: λ°°μΉ μ²λ¦¬ λ° λ©”λ¨λ¦¬ ν¨μ¨μ„± ν–¥μƒ (NEW)

## μ‹μ¤ν… κµ¬μ΅°

```
scripts/assembly/
β”β”€β”€ collect_laws.py              # λ²•λ¥  μμ§‘ λ©”μΈ μ¤ν¬λ¦½νΈ
β”β”€β”€ collect_laws_optimized.py    # μµμ ν™”λ λ²•λ¥  μμ§‘ μ¤ν¬λ¦½νΈ (NEW)
β”β”€β”€ checkpoint_manager.py        # μ²΄ν¬ν¬μΈνΈ κ΄€λ¦¬
β”β”€β”€ assembly_collector.py        # λ°μ΄ν„° μμ§‘ λ° μ €μ¥
β”β”€β”€ assembly_logger.py           # λ΅κΉ… μ„¤μ •
β””β”€β”€ assembly_playwright_client.py # Playwright ν΄λΌμ΄μ–ΈνΈ
```

## μ„¤μΉ λ° μ„¤μ •

### 1. ν•„μ”ν• ν¨ν‚¤μ§€ μ„¤μΉ

```bash
pip install playwright psutil
playwright install chromium
```

### 2. λ””λ ‰ν† λ¦¬ κµ¬μ΅°

```
data/
β”β”€β”€ raw/assembly/
β”‚   β”β”€β”€ law/20251010/           # λ‚ μ§λ³„ λ²•λ¥  λ°μ΄ν„°
β”‚   β””β”€β”€ precedent/20251010/     # λ‚ μ§λ³„ νλ΅€ λ°μ΄ν„°
β”β”€β”€ checkpoints/
β”‚   β”β”€β”€ laws/                   # λ²•λ¥  μμ§‘ μ²΄ν¬ν¬μΈνΈ
β”‚   β””β”€β”€ precedents/             # νλ΅€ μμ§‘ μ²΄ν¬ν¬μΈνΈ
β””β”€β”€ logs/                       # λ΅κ·Έ νμΌ
```

## νλ΅€ μμ§‘ μ‹μ¤ν… (NEW)

### νλ΅€ νμ΄μ§€ λ¶„μ„ κ²°κ³Ό

κµ­ν λ²•λ¥ μ •λ³΄μ‹μ¤ν…μ νλ΅€ νμ΄μ§€(https://likms.assembly.go.kr/law/lawsPrecInqyList2010.do) λ¶„μ„μ„ ν†µν•΄ λ‹¤μμ„ ν™•μΈν–μµλ‹λ‹¤:

#### ν…μ΄λΈ” κµ¬μ΅°
- **ν—¤λ”**: `['λ²νΈ', 'μ‚¬κ±΄λ…', 'μ‚¬κ±΄λ²νΈ', 'μ„ κ³ μΌ', 'λ¶„μ•Ό', 'λ²•μ›']`
- **μƒν” λ°μ΄ν„°**: `['89609', 'λ°°λ‹Ήμ΄μμμ†', '2023λ‹¤240299', '2025.7.24', 'λ―Όμ‚¬', 'λ€λ²•μ›']`
- **νμ΄μ§€λ‹Ή ν•­λ© μ**: 10κ° (λ²•λ¥ κ³Ό λ™μΌ)

#### νμ΄μ§€λ„¤μ΄μ…
- **ν΄λμ¤**: `span.page_no`
- **JavaScript ν•¨μ**: `pageCall()` (λ²•λ¥ κ³Ό λ™μΌ)
- **URL νλΌλ―Έν„°**: `pageNum=2`, `pageSize=10`

#### JavaScript ν•¨μ
- `pageCall()`: νμ΄μ§€ μ΄λ™ ν•¨μ
- `selfCall()`: κ²€μƒ‰ λ° μ΅°ν ν•¨μ
- `selfExcelCall()`: Excel λ‹¤μ΄λ΅λ“ ν•¨μ

### νλ΅€ μμ§‘ μ‚¬μ©λ²•

```bash
# κΈ°λ³Έ μ‚¬μ©λ²•
python scripts/assembly/collect_precedents.py --sample 10

# μ‹μ‘ νμ΄μ§€ μ§€μ •
python scripts/assembly/collect_precedents.py --sample 50 --start-page 5 --no-resume

# νΉμ • νμ΄μ§€ λ²”μ„ μμ§‘
python scripts/assembly/collect_precedents.py --sample 100 --start-page 3 --no-resume

# μ „μ²΄ μμ§‘
python scripts/assembly/collect_precedents.py --full
```

### νλ΅€ λ°μ΄ν„° κµ¬μ΅°

```json
{
  "case_name": "λ°°λ‹Ήμ΄μμμ†",
  "case_number": "2023λ‹¤240299",
  "decision_date": "2025.7.24",
  "field": "λ―Όμ‚¬",
  "court": "λ€λ²•μ›",
  "precedent_content": "νμ‹μ‚¬ν•­...",
  "content_html": "<html>...</html>",
  "params": {
    "contId": "2025091900000073",
    "genMenuId": "menu_serv_nlaw_lawt_4020"
  },
  "collected_at": "2025-01-10T20:39:00"
}
```

### νλ΅€ μμ§‘ μ„±κ³Ό

- **100% μ„±κ³µλ¥ **: μ‹¤ν¨ μ—†μ΄ λ¨λ“  νλ΅€ μμ§‘ μ™„λ£
- **κµ¬μ΅°ν™”λ λ°μ΄ν„°**: νλ΅€ μƒμ„Έ μ •λ³΄λ¥Ό μ²΄κ³„μ μΌλ΅ λ¶„λ¥ν•μ—¬ μ¶”μ¶
- **μ •ν™•ν• νλ΅€λ…**: μ‹¤μ  νλ΅€λ…μ„ μ •ν™•ν μ¶”μ¶ (λ°°λ‹Ήμ΄μμμ†, λ¶€μΈμμ† λ“±)
- **μƒμ„Έ λ‚΄μ© μ¶”μ¶**: νμ‹μ‚¬ν•­, νκ²°μ”μ§€ λ“± λ²•λ¥ μ  λ‚΄μ© ν¬ν•¨
- **ν‚¤μ›λ“ κ²€μ¦**: νλ΅€ κ΄€λ ¨ ν‚¤μ›λ“ μλ™ κ²€μ¦
- **λ©”λ¨λ¦¬ ν¨μ¨μ„±**: ν‰κ·  410MB λ©”λ¨λ¦¬ μ‚¬μ©λ‰μΌλ΅ μ•μ •μ  μ΄μ

### κµ¬μ΅°ν™”λ νλ΅€ λ°μ΄ν„° (NEW)

νλ΅€ μƒμ„Έ νμ΄μ§€μ λ©μ°¨λ¥Ό λ¶„μ„ν•μ—¬ λ‹¤μκ³Ό κ°™μ΄ κµ¬μ΅°ν™”λ λ°μ΄ν„°λ¥Ό μ κ³µν•©λ‹λ‹¤:

#### λ°μ΄ν„° κµ¬μ΅°
```json
{
  "case_name": "νλ΅€λ…",
  "case_number": "2023λ‹¤240299",
  "court": "λ€λ²•μ›",
  "decision_date": "2025-07-24",
  "field": "λ―Όμ‚¬",
  "structured_content": {
    "case_info": {
      "case_title": "λ€λ²•μ› 2025. 7. 24. μ„ κ³  2023λ‹¤240299 μ „μ›ν•©μμ²΄ νκ²°",
      "court": "λ€λ²•μ›",
      "decision_date": "2025-07-24",
      "case_number": "2023λ‹¤240299"
    },
    "legal_sections": {
      "νμ‹μ‚¬ν•­": "μ±„λ¬΄μκ°€ μ‹ν¨μ™„μ„± ν›„ μ±„λ¬΄λ¥Ό μΉμΈν• κ²½μ°...",
      "νκ²°μ”μ§€": "[λ‹¤μμκ²¬] 'μ±„λ¬΄μκ°€ μ‹ν¨μ™„μ„± ν›„...",
      "μ°Έμ΅°μ΅°λ¬Έ": "λ―Όλ²• μ 184μ΅°",
      "μ°Έμ΅°νλ΅€": "λ€λ²•μ› 1967. 2. 7. μ„ κ³  66λ‹¤2173 νκ²°...",
      "μ£Όλ¬Έ": "μ›μ‹¬νκ²° μ¤‘ μ›κ³  ν¨μ† λ¶€λ¶„μ„ νκΈ°ν•κ³ ...",
      "μ΄μ ": "μ£Όλ©”λ‰΄λ°”λ΅κ°€κΈ°..."
    },
    "parties": {
      "plaintiff": "μ›κ³ , μƒκ³ μΈ",
      "defendant": "ν”Όκ³ , ν”Όμƒκ³ μΈ",
      "appellant": "μ›κ³ , μƒκ³ μΈ",
      "appellee": "ν”Όκ³ , ν”Όμƒκ³ μΈ"
    },
    "procedural_info": {
      "lower_court": "μΈμ²μ§€λ°©λ²•μ›",
      "lower_court_decision": "μ›μ‹¬νκ²° μΈμ²μ§€λ²• 2023. 4. 28. μ„ κ³ ...",
      "appeal_type": "μƒκ³ ",
      "final_decision": "νκΈ°ν™μ†΅"
    },
    "extraction_metadata": {
      "total_lines": 408,
      "non_empty_lines": 218,
      "extracted_sections": 5,
      "extraction_timestamp": "2025-10-10T21:03:00.223853"
    }
  }
}
```

#### μ£Όμ” νΉμ§•
- **μ²΄κ³„μ  λ¶„λ¥**: νλ΅€μ κ° μ„Ήμ…μ„ μλ™μΌλ΅ μΈμ‹ν•κ³  λ¶„λ¥
- **λ©”νƒ€λ°μ΄ν„° ν¬ν•¨**: μ¶”μ¶ κ³Όμ •μ μƒμ„Έ μ •λ³΄ μ κ³µ
- **ν•μ„ νΈν™μ„±**: κΈ°μ΅΄ `precedent_content` ν•„λ“ μ μ§€
- **ν™•μ¥ κ°€λ¥**: μƒλ΅μ΄ μ„Ήμ… μ¶”κ°€ μ©μ΄

### νλ΅€λ… μ¶”μ¶ κ°μ„  (NEW)

#### λ¬Έμ μ 
- **κΈ°μ΅΄ λ¬Έμ **: `case_name`μ΄ "κµ­νλ²•λ¥ μ •λ³΄μ‹μ¤ν…\nNational Assembly Law Information"μΌλ΅ μλ» μ¶”μ¶
- **μ›μΈ**: μƒμ„Έ νμ΄μ§€μ μ²« λ²μ§Έ h1 νƒκ·Έ(μ›Ήμ‚¬μ΄νΈ ν—¤λ”)λ¥Ό κ°€μ Έμ¤κ³  μμ—μ

#### ν•΄κ²° λ°©λ²•
λ‹¤λ‹¨κ³„ νλ΅€λ… μ¶”μ¶ λ΅μ§μ„ κµ¬ν„ν–μµλ‹λ‹¤:

1. **λ°©λ²• 1**: λ©λ΅ νμ΄μ§€μ—μ„ κ°€μ Έμ¨ νλ΅€λ… μ‚¬μ© (κ°€μ¥ μ •ν™•)
2. **λ°©λ²• 2**: μƒμ„Έ νμ΄μ§€μ—μ„ λ€κ΄„νΈλ΅ λ‘λ¬μ‹ΈμΈ νλ΅€λ… μ°ΎκΈ°
3. **λ°©λ²• 3**: contents ν΄λμ¤μ—μ„ νλ΅€λ… μ°ΎκΈ°
4. **λ°©λ²• 4**: λ§μ§€λ§‰ μλ‹¨μΌλ΅ λ©λ΅ νμ΄μ§€ νλ΅€λ… μ‚¬μ©

#### κ°μ„  κ²°κ³Ό
- **μ΄μ „**: `case_name: "κµ­νλ²•λ¥ μ •λ³΄μ‹μ¤ν…\nNational Assembly Law Information"`
- **μμ • ν›„**: `case_name: "λ°°λ‹Ήμ΄μμμ†"`, `case_name: "λ¶€μΈμμ†"`
- **μ„±κ³µλ¥ **: 100% μ •ν™•ν• νλ΅€λ… μ¶”μ¶

## μµμ ν™”λ λ²•λ¥  μμ§‘ (NEW)

### μ„±λ¥ κ°μ„  μ‚¬ν•­

μµμ ν™”λ `collect_laws_optimized.py`λ” κΈ°μ΅΄ μ¤ν¬λ¦½νΈμ μ„±λ¥ λ³‘λ© μ§€μ μ„ ν•΄κ²°ν–μµλ‹λ‹¤:

#### 1. νμ΄μ§€λ³„ μ €μ¥ μ‹μ¤ν…
- **κΈ°μ΅΄**: κ° λ²•λ¥ μ„ κ°λ³„ νμΌλ΅ μ €μ¥
- **κ°μ„ **: νμ΄μ§€λ³„λ΅ 10κ°μ”© λ¬¶μ–΄μ„ μ €μ¥ (μ¦‰μ‹ μ €μ¥)
- **ν¨κ³Ό**: νμ΄μ§€ λ‹¨μ„λ΅ μ•μ „ν• λ°μ΄ν„° λ³΄νΈ λ° μ§„ν–‰ μ¶”μ 

#### 2. λ©”λ¨λ¦¬ κ΄€λ¦¬ μµμ ν™”
- **κΈ°μ΅΄**: λ§¤ νμ΄μ§€λ§λ‹¤ λ©”λ¨λ¦¬ μ²΄ν¬
- **κ°μ„ **: 10νμ΄μ§€λ§λ‹¤λ§ λ©”λ¨λ¦¬ μ²΄ν¬
- **ν¨κ³Ό**: λ¶ν•„μ”ν• λ©”λ¨λ¦¬ μ²΄ν¬ μ¤λ²„ν—¤λ“ μ κ±°

#### 3. μ²΄ν¬ν¬μΈνΈ μ €μ¥ μµμ ν™”
- **κΈ°μ΅΄**: λ§¤ νμ΄μ§€λ§λ‹¤ μ²΄ν¬ν¬μΈνΈ μ €μ¥
- **κ°μ„ **: 5νμ΄μ§€λ§λ‹¤λ§ μ²΄ν¬ν¬μΈνΈ μ €μ¥
- **ν¨κ³Ό**: λ””μ¤ν¬ I/O νμ κ°μ†

#### 4. Rate Limiting μ μ§€
- **μ”μ²­ κ°„ λ€κΈ° μ‹κ°„**: 3μ΄ κ·Έλ€λ΅ μ μ§€
- **μ„λ²„ λ¶€ν•**: λ™μΌν• μμ¤€μΌλ΅ μ ν•
- **μ•μ •μ„±**: μ„λ²„ κ³Όλ¶€ν• λ°©μ§€ ν¨κ³Ό μ μ§€

### μ‚¬μ©λ²•

```bash
# μµμ ν™”λ λ²„μ „ μ‚¬μ© (κ¶μ¥) - νμ΄μ§€λ³„ μ €μ¥
python scripts/assembly/collect_laws_optimized.py --sample 600 --start-page 151 --no-resume

# νμ΄μ§€λ‹Ή λ²•λ¥  μ μ΅°μ •
python scripts/assembly/collect_laws_optimized.py --sample 100 --laws-per-page 5

# κΈ°μ΅΄ λ²„μ „ μ‚¬μ©
python scripts/assembly/collect_laws.py --sample 600 --start-page 151 --no-resume
```

### μμƒ μ„±λ¥ ν–¥μƒ

- **λ©”λ¨λ¦¬ μ‚¬μ©λ‰**: 20-30% κ°μ†
- **λ””μ¤ν¬ I/O**: νμ΄μ§€λ³„ μ €μ¥μΌλ΅ μ•μ „μ„± ν–¥μƒ
- **μ „μ²΄ μ²λ¦¬ μ‹κ°„**: 15-25% λ‹¨μ¶•
- **λ°μ΄ν„° μ•μ „μ„±**: νμ΄μ§€ λ‹¨μ„λ΅ μ¦‰μ‹ μ €μ¥
- **μ§„ν–‰ μ¶”μ **: νμ΄μ§€λ³„ λ…ν™•ν• μ§„ν–‰ μƒν™© ν™•μΈ

## μ„±λ¥ λ¨λ‹ν„°λ§ (NEW)

### Grafana + Prometheus ν†µν•©

λ²•λ¥  μμ§‘ μ„±λ¥μ„ μ‹¤μ‹κ°„μΌλ΅ λ¨λ‹ν„°λ§ν•  μ μλ” μ‹μ¤ν…μ΄ μ¶”κ°€λμ—μµλ‹λ‹¤.

#### λ¨λ‹ν„°λ§ μ¤νƒ μ‹μ‘

```bash
# λ¨λ‹ν„°λ§ λ””λ ‰ν† λ¦¬λ΅ μ΄λ™
cd monitoring

# Docker μ¤νƒ μ‹μ‘
./start_monitoring.sh
```

#### μ ‘κ·Ό URL

- **Grafana**: http://localhost:3000 (admin/admin123)
- **Prometheus**: http://localhost:9090
- **λ©”νΈλ¦­ μ—”λ“ν¬μΈνΈ**: http://localhost:8000/metrics

#### λ©”νΈλ¦­ μμ§‘ ν™μ„±ν™”

```bash
# λ©”νΈλ¦­ μμ§‘ ν™μ„±ν™” (κΈ°λ³Έκ°’)
python scripts/assembly/collect_laws_optimized.py --sample 50 --enable-metrics

# λ©”νΈλ¦­ μμ§‘ λΉ„ν™μ„±ν™”
python scripts/assembly/collect_laws_optimized.py --sample 50 --disable-metrics
```

#### μμ§‘λλ” λ©”νΈλ¦­

- **μ²λ¦¬λ‰**: λ¶„λ‹Ή λ²•λ¥  μ
- **μ²λ¦¬ μ‹κ°„**: νμ΄μ§€λ³„ μ²λ¦¬ μ‹κ°„ (50th, 95th percentile)
- **λ©”λ¨λ¦¬ μ‚¬μ©λ‰**: μ‹¤μ‹κ°„ λ©”λ¨λ¦¬ μ‚¬μ©λ‰
- **CPU μ‚¬μ©λ¥ **: μ‹¤μ‹κ°„ CPU μ‚¬μ©λ¥ 
- **μ—λ¬μ¨**: μ—λ¬ μ ν•λ³„ λ°μƒλ¥ 
- **μ§„ν–‰ μƒν™©**: ν„μ¬ νμ΄μ§€, μμ§‘ μƒνƒ

#### λ΅κ·Έ λ¶„μ„ λ„κµ¬

```bash
# νΉμ • λ‚ μ§ λ¶„μ„
python scripts/monitoring/analyze_logs.py --date 20250112

# λ‘ μ‹¤ν–‰ κ²°κ³Ό λΉ„κµ
python scripts/monitoring/analyze_logs.py --compare 20250111 20250112

# λ¦¬ν¬νΈ μƒμ„±
python scripts/monitoring/analyze_logs.py --date 20250112 --output report.md
```

μμ„Έν• λ‚΄μ©μ€ [λ¨λ‹ν„°λ§ μ„¤μ • κ°€μ΄λ“](monitoring_setup_guide.md)λ¥Ό μ°Έμ΅°ν•μ„Έμ”.

---

### μ‹μ‘ νμ΄μ§€ μ§€μ • (NEW)

```bash
# 5νμ΄μ§€λ¶€ν„° 20κ° μμ§‘
python scripts/assembly/collect_laws.py --sample 20 --start-page 5 --no-resume

# 10νμ΄μ§€λ¶€ν„° 50κ° μμ§‘
python scripts/assembly/collect_laws.py --sample 50 --start-page 10 --no-resume

# 3νμ΄μ§€λ¶€ν„° 20νμ΄μ§€κΉμ§€ μμ§‘ (180κ°)
python scripts/assembly/collect_laws.py --sample 180 --start-page 3 --no-resume
```

### μ¬κ° κΈ°λ¥

```bash
# μ¤‘λ‹¨λ μ§€μ μ—μ„ μ¬κ° (κΈ°λ³Έκ°’)
python scripts/assembly/collect_laws.py --sample 100 --resume

# μ²μλ¶€ν„° μ‹μ‘
python scripts/assembly/collect_laws.py --sample 100 --no-resume
```

### κ³ κΈ‰ μµμ…

```bash
# νμ΄μ§€ ν¬κΈ° μ§€μ • (κΈ°λ³Έ: 100)
python scripts/assembly/collect_laws.py --sample 100 --page-size 50

# λ΅κ·Έ λ λ²¨ μ§€μ •
python scripts/assembly/collect_laws.py --sample 100 --log-level DEBUG
```

## λ§¤κ°λ³€μ μ„¤λ…

### κΈ°λ³Έ μ¤ν¬λ¦½νΈ (collect_laws.py)

| λ§¤κ°λ³€μ | μ„¤λ… | κΈ°λ³Έκ°’ | μμ‹ |
|---------|------|--------|------|
| `--sample N` | μμ§‘ν•  μƒν” κ°μ | - | `--sample 100` |
| `--full` | μ „μ²΄ μμ§‘ (7602κ°) | - | `--full` |
| `--start-page N` | μ‹μ‘ νμ΄μ§€ λ²νΈ | 1 | `--start-page 5` |
| `--resume` | μ²΄ν¬ν¬μΈνΈμ—μ„ μ¬κ° | True | `--resume` |
| `--no-resume` | μ²μλ¶€ν„° μ‹μ‘ | False | `--no-resume` |
| `--page-size N` | νμ΄μ§€λ‹Ή ν•­λ© μ | 100 | `--page-size 50` |
| `--log-level LEVEL` | λ΅κ·Έ λ λ²¨ | INFO | `--log-level DEBUG` |

### μµμ ν™”λ μ¤ν¬λ¦½νΈ (collect_laws_optimized.py)

| λ§¤κ°λ³€μ | μ„¤λ… | κΈ°λ³Έκ°’ | μμ‹ |
|---------|------|--------|------|
| `--sample N` | μμ§‘ν•  μƒν” κ°μ | - | `--sample 100` |
| `--full` | μ „μ²΄ μμ§‘ (7602κ°) | - | `--full` |
| `--start-page N` | μ‹μ‘ νμ΄μ§€ λ²νΈ | 1 | `--start-page 5` |
| `--resume` | μ²΄ν¬ν¬μΈνΈμ—μ„ μ¬κ° | True | `--resume` |
| `--no-resume` | μ²μλ¶€ν„° μ‹μ‘ | False | `--no-resume` |
| `--page-size N` | νμ΄μ§€λ‹Ή ν•­λ© μ | 100 | `--page-size 50` |
| `--laws-per-page N` | νμ΄μ§€λ‹Ή λ²•λ¥  μ (NEW) | 10 | `--laws-per-page 5` |
| `--log-level LEVEL` | λ΅κ·Έ λ λ²¨ | INFO | `--log-level DEBUG` |

## λ°μ΄ν„° κµ¬μ΅°

### λ²•λ¥  λ°μ΄ν„° κµ¬μ΅°

```json
{
  "cont_id": "1981022300000003",
  "cont_sid": "0030",
  "law_name": "μ§‘ν–‰κ΄€μμλ£κ·μΉ™",
  "law_content": "μ 1μ΅°(λ©μ ) μ΄ κ·μΉ™μ€...",
  "content_html": "<html>...</html>",
  "row_number": "1",
  "category": "κΈ°νƒ€",
  "law_type": "κ·μΉ™",
  "promulgation_number": "λ€λ²•μ›κ·μΉ™ μ 1234νΈ",
  "promulgation_date": "1981.02.23",
  "enforcement_date": "1981.02.23",
  "amendment_type": "μ μ •",
  "detail_url": "https://likms.assembly.go.kr/law/...",
  "collected_at": "2025-01-10T19:30:00"
}
```

### νμ΄μ§€λ³„ μ €μ¥ νμΌ κµ¬μ΅° (μµμ ν™”λ λ²„μ „)

```json
{
  "page_info": {
    "page_number": 5,
    "laws_count": 10,
    "saved_at": "2025-01-12T14:30:22",
    "page_size": 10
  },
  "laws": [
    {
      "cont_id": "1981022300000003",
      "law_name": "μ§‘ν–‰κ΄€μμλ£κ·μΉ™",
      "law_content": "μ 1μ΅°(λ©μ )...",
      // ... κΈ°νƒ€ ν•„λ“λ“¤
    }
  ]
}
```

## μ²΄ν¬ν¬μΈνΈ μ‹μ¤ν…

### μ²΄ν¬ν¬μΈνΈ νμΌ μ„μΉ

```
data/checkpoints/laws/checkpoint.json
```

### μ²΄ν¬ν¬μΈνΈ λ°μ΄ν„° κµ¬μ΅°

```json
{
  "data_type": "law",
  "category": null,
  "current_page": 15,
  "total_pages": 60,
  "collected_count": 150,
  "collected_this_run": 150,
  "start_time": "2025-01-10T19:00:00",
  "memory_usage_mb": 450.2,
  "target_count": 200,
  "page_size": 100,
  "saved_at": "2025-01-10T19:30:00",
  "checkpoint_version": "1.0"
}
```

### μ²΄ν¬ν¬μΈνΈ κ΄€λ¦¬

- **μλ™ μ €μ¥**: κ° νμ΄μ§€ μ²λ¦¬ ν›„ μλ™μΌλ΅ μ²΄ν¬ν¬μΈνΈ μ €μ¥
- **μ¬κ° κΈ°λ¥**: μ¤‘λ‹¨λ μ§€μ λ¶€ν„° μλ™μΌλ΅ μ¬κ°
- **λ°±μ—… μ‹μ¤ν…**: μ²΄ν¬ν¬μΈνΈ νμΌ μ†μƒ μ‹ λ³µκµ¬ κ°€λ¥

## λ©”λ¨λ¦¬ κ΄€λ¦¬

### λ©”λ¨λ¦¬ λ¨λ‹ν„°λ§

- **μ‹¤μ‹κ°„ λ¨λ‹ν„°λ§**: κ° μ”μ²­λ§λ‹¤ λ©”λ¨λ¦¬ μ‚¬μ©λ‰ μ²΄ν¬
- **μ ν• μ„¤μ •**: κΈ°λ³Έ 800MB μ ν• (μ΅°μ • κ°€λ¥)
- **μλ™ ν”λ¬μ‹**: λ©”λ¨λ¦¬ μ ν• μ΄κ³Ό μ‹ μλ™μΌλ΅ λ°μ΄ν„° μ €μ¥

### λ©”λ¨λ¦¬ μµμ ν™”

```python
# λ©”λ¨λ¦¬ μ ν• μ„¤μ •
memory_limit_mb = 800

# λ°°μΉ ν¬κΈ° μ΅°μ •
batch_size = 50

# λ¶ν•„μ”ν• λ³€μ μ¦‰μ‹ μ‚­μ 
del large_variable
```

## λ΅κΉ… μ‹μ¤ν…

### λ΅κ·Έ λ λ²¨

- **DEBUG**: μƒμ„Έν• λ””λ²„κΉ… μ •λ³΄
- **INFO**: μΌλ°μ μΈ μ§„ν–‰ μƒν™©
- **WARNING**: κ²½κ³  λ©”μ‹μ§€
- **ERROR**: μ¤λ¥ λ©”μ‹μ§€

### λ΅κ·Έ νμΌ μ„μΉ

```
logs/
β”β”€β”€ assembly_law_collection_20251010.log
β””β”€β”€ assembly_law_collection_20251010.json
```

### λ΅κ·Έ μμ‹

```
2025-01-10 19:30:00 - INFO - π“„ Processing Page 5/60
2025-01-10 19:30:01 - INFO - π” Fetching law list from page 5...
2025-01-10 19:30:02 - INFO - β… Found 10 laws on page
2025-01-10 19:30:03 - INFO - π“‹ Processing 10 laws...
2025-01-10 19:30:04 - INFO - [ 1/10] Processing: μ§‘ν–‰κ΄€μμλ£κ·μΉ™...
```

## μ¤λ¥ μ²λ¦¬

### μΌλ°μ μΈ μ¤λ¥

1. **μ²΄ν¬ν¬μΈνΈ λ°±μ—… μ¤λ¥**
   ```
   FileExistsError: νμΌμ΄ μ΄λ―Έ μμΌλ―€λ΅ λ§λ“¤ μ μ—†μµλ‹λ‹¤
   ```
   - ν•΄κ²°: μ²΄ν¬ν¬μΈνΈ νμΌμ„ κ°„λ‹¨ν•κ² λ®μ–΄μ“°κΈ° λ°©μ‹μΌλ΅ λ³€κ²½

2. **λ©”λ¨λ¦¬ λ¶€μ΅±**
   ```
   Memory usage exceeds limit
   ```
   - ν•΄κ²°: λ°°μΉ ν¬κΈ° μ¤„μ΄κΈ° λλ” λ©”λ¨λ¦¬ μ ν• μ¦κ°€

3. **λ„¤νΈμ›ν¬ μ¤λ¥**
   ```
   Failed to get law list page
   ```
   - ν•΄κ²°: μ¬μ‹λ„ λ΅μ§ λλ” λ„¤νΈμ›ν¬ μƒνƒ ν™•μΈ

### μ¤λ¥ λ³µκµ¬

```bash
# μ²΄ν¬ν¬μΈνΈ νμΌ μ‚­μ  ν›„ μ¬μ‹μ‘
rm -rf data/checkpoints/laws/*
python scripts/assembly/collect_laws.py --sample 100 --no-resume

# νΉμ • νμ΄μ§€λ¶€ν„° μ¬μ‹μ‘
python scripts/assembly/collect_laws.py --sample 100 --start-page 10 --no-resume
```

## μ„±λ¥ μµμ ν™”

### μ”μ²­ μ†λ„ μ΅°μ 

```python
# μ”μ²­ κ°„κ²© μ„¤μ •
rate_limit = 3.0  # 3μ΄ κ°„κ²©

# νƒ€μ„μ•„μ›ƒ μ„¤μ •
timeout = 30000  # 30μ΄
```

### νμ΄μ§€λ³„ μ €μ¥ μ²λ¦¬

```python
# νμ΄μ§€λ‹Ή λ²•λ¥  μ μ„¤μ •
laws_per_page = 10  # μ‹¤μ  μ›Ήμ‚¬μ΄νΈλ” 10κ°μ”© ν‘μ‹

# νμ΄μ§€λ³„ μ¦‰μ‹ μ €μ¥
def save_page(self, page_number: int):
    """νμ΄μ§€λ³„ μ €μ¥ (10κ°μ”©)"""
    # νμ΄μ§€ μ²λ¦¬ μ™„λ£ ν›„ μ¦‰μ‹ μ €μ¥
```

### λ©”λ¨λ¦¬ κ΄€λ¦¬ μµμ ν™”

```python
# λ©”λ¨λ¦¬ μ²΄ν¬ λΉλ„ μ΅°μ •
memory_check_interval = 10  # 10νμ΄μ§€λ§λ‹¤ μ²΄ν¬

# μ²΄ν¬ν¬μΈνΈ μ €μ¥ λΉλ„ μ΅°μ •
checkpoint_interval = 5  # 5νμ΄μ§€λ§λ‹¤ μ²΄ν¬ν¬μΈνΈ μ €μ¥
```

## λ¨λ‹ν„°λ§

### μ§„ν–‰λ¥  ν™•μΈ

```bash
# μ‹¤μ‹κ°„ λ΅κ·Έ ν™•μΈ
tail -f logs/assembly_law_collection_20251010.log

# μ²΄ν¬ν¬μΈνΈ μƒνƒ ν™•μΈ
cat data/checkpoints/laws/checkpoint.json
```

### ν†µκ³„ μ •λ³΄

```bash
# μμ§‘λ νμΌ κ°μ ν™•μΈ (κΈ°μ΅΄ λ²„μ „)
ls data/raw/assembly/law/20251010/ | wc -l

# μμ§‘λ νμΌ κ°μ ν™•μΈ (μµμ ν™”λ λ²„μ „)
ls data/raw/assembly/law/20250112/ | grep "law_page_" | wc -l

# μμ§‘λ λ°μ΄ν„° ν¬κΈ° ν™•μΈ
du -sh data/raw/assembly/law/20250112/

# νμ΄μ§€λ³„ λ²•λ¥  μ ν™•μΈ
find data/raw/assembly/law/20250112/ -name "law_page_*.json" -exec jq '.page_info.laws_count' {} \; | awk '{sum+=$1} END {print "Total laws:", sum}'
```

## λ¬Έμ  ν•΄κ²°

### μμ£Ό λ°μƒν•λ” λ¬Έμ 

1. **μ‹μ‘ νμ΄μ§€κ°€ μ‘λ™ν•μ§€ μ•μ**
   - ν•΄κ²°: `--no-resume` μµμ…κ³Ό ν•¨κ» μ‚¬μ©

2. **μ²΄ν¬ν¬μΈνΈ μ¤λ¥**
   - ν•΄κ²°: μ²΄ν¬ν¬μΈνΈ νμΌ μ‚­μ  ν›„ μ¬μ‹μ‘

3. **λ©”λ¨λ¦¬ λ¶€μ΅±**
   - ν•΄κ²°: λ°°μΉ ν¬κΈ° μ¤„μ΄κΈ° λλ” λ©”λ¨λ¦¬ μ ν• μ¦κ°€

### λ””λ²„κΉ…

```bash
# λ””λ²„κ·Έ λ¨λ“λ΅ μ‹¤ν–‰
python scripts/assembly/collect_laws.py --sample 10 --log-level DEBUG

# νΉμ • νμ΄μ§€λ§ ν…μ¤νΈ
python scripts/assembly/collect_laws.py --sample 10 --start-page 5 --no-resume
```

## ν–¥ν›„ κ°μ„  κ³„ν

1. **νλ΅€ μμ§‘ κΈ°λ¥ μ¶”κ°€**
2. **λ°μ΄ν„°λ² μ΄μ¤ ν†µν•©**
3. **λ²΅ν„° μ„λ² λ”© μƒμ„±**
4. **ν•μ΄λΈλ¦¬λ“ κ²€μƒ‰ μ‹μ¤ν… ν†µν•©**
5. **μλ™ν™” μ¤μΌ€μ¤„λ§**

## μ°Έκ³  μλ£

- [κµ­ν λ²•λ¥ μ •λ³΄μ‹μ¤ν…](https://likms.assembly.go.kr/law)
- [Playwright λ¬Έμ„](https://playwright.dev/python/)
- [psutil λ¬Έμ„](https://psutil.readthedocs.io/)

## λ³€κ²½ μ΄λ ¥

### v1.0.0 (2025-01-10)
- μ΄κΈ° Assembly λ°μ΄ν„° μμ§‘ μ‹μ¤ν… κµ¬ν„
- Playwright κΈ°λ° μ›Ή μ¤ν¬λν•‘
- μ²΄ν¬ν¬μΈνΈ μ‹μ¤ν… κµ¬ν„
- λ©”λ¨λ¦¬ κ΄€λ¦¬ μ‹μ¤ν… κµ¬ν„

### v1.1.0 (2025-01-10)
- μ‹μ‘ νμ΄μ§€ μ§€μ • κΈ°λ¥ μ¶”κ°€
- μ²΄ν¬ν¬μΈνΈ λ°±μ—… μ¤λ¥ ν•΄κ²°
- λ΅κΉ… μ‹μ¤ν… κ°μ„ 
- νμ΄μ§€λ³„ μ €μ¥ κΈ°λ¥ μ¶”κ°€

### v1.2.0 (2025-01-12)
- μµμ ν™”λ λ²•λ¥  μμ§‘ μ¤ν¬λ¦½νΈ μ¶”κ°€ (`collect_laws_optimized.py`)
- νμ΄μ§€λ³„ μ €μ¥ μ‹μ¤ν…μΌλ΅ λ©”λ¨λ¦¬ ν¨μ¨μ„± ν–¥μƒ
- λ©”λ¨λ¦¬ μ²΄ν¬ λΉλ„ μµμ ν™” (10νμ΄μ§€λ§λ‹¤)
- μ²΄ν¬ν¬μΈνΈ μ €μ¥ λΉλ„ μµμ ν™” (5νμ΄μ§€λ§λ‹¤)
- Rate Limiting μ μ§€ν•λ©΄μ„ μ„±λ¥ 15-25% ν–¥μƒ
- νμ΄μ§€λ‹Ή λ²•λ¥  μ μ΅°μ • μµμ… μ¶”κ°€ (`--laws-per-page`)

### v1.3.0 (2025-01-12)
- νμ΄μ§€λ³„ μ¦‰μ‹ μ €μ¥ κΈ°λ¥ κµ¬ν„
- νμ΄μ§€ λ‹¨μ„λ΅ μ•μ „ν• λ°μ΄ν„° λ³΄νΈ
- μ§„ν–‰ μƒν™© μ¶”μ  κ°μ„  (νμ΄μ§€λ³„ μ§„ν–‰λ¥  ν‘μ‹)
- νμΌ κµ¬μ΅° κ°μ„  (page_info λ©”νƒ€λ°μ΄ν„° μ¶”κ°€)
- λ°μ΄ν„° μ•μ „μ„± λ° λ³µκµ¬ κ°€λ¥μ„± ν–¥μƒ

### v1.4.0 (2025-01-12)
- Grafana + Prometheus λ¨λ‹ν„°λ§ μ‹μ¤ν… ν†µν•©
- μ‹¤μ‹κ°„ μ„±λ¥ λ©”νΈλ¦­ μμ§‘ λ° μ‹κ°ν™”
- νμ΄μ§€λ³„ μ²λ¦¬ μ‹κ°„ λ° μ²λ¦¬λ‰ μ¶”μ 
- λ©”λ¨λ¦¬ λ° CPU μ‚¬μ©λ‰ λ¨λ‹ν„°λ§
- μ—λ¬μ¨ λ° μ•λ¦Ό μ‹μ¤ν… κµ¬μ¶•
- λ΅κ·Έ λ¶„μ„ λ„κµ¬ λ° μ„±λ¥ λ¦¬ν¬νΈ μƒμ„±
