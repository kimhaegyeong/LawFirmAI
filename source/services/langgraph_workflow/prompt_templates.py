# -*- coding: utf-8 -*-
"""
ë²•ë¥  ì§ˆë¬¸ë³„ ë§ì¶¤í˜• í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿
ë‹µë³€ í’ˆì§ˆ í–¥ìƒì„ ìœ„í•œ êµ¬ì¡°í™”ëœ í”„ë¡¬í”„íŠ¸ ì‹œìŠ¤í…œ
í†µí•© í”„ë¡¬í”„íŠ¸ ê´€ë¦¬ ì‹œìŠ¤í…œê³¼ ì—°ë™
"""

import os
import sys
from typing import Dict, List, Optional

# ìƒìœ„ ë””ë ‰í† ë¦¬ì˜ ëª¨ë“ˆ importë¥¼ ìœ„í•œ ê²½ë¡œ ì¶”ê°€
sys.path.append(os.path.dirname(os.path.dirname(os.path.abspath(__file__))))
from ..unified_prompt_manager import LegalDomain, ModelType, UnifiedPromptManager


class LegalPromptTemplates:
    """ë²•ë¥  ì§ˆë¬¸ë³„ ë§ì¶¤í˜• í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ (í†µí•© ì‹œìŠ¤í…œê³¼ ì—°ë™)"""

    def __init__(self):
        """í†µí•© í”„ë¡¬í”„íŠ¸ ê´€ë¦¬ì ì´ˆê¸°í™”"""
        self.unified_manager = UnifiedPromptManager()

    # ê³„ì•½ì„œ ê²€í†  ê´€ë ¨ í…œí”Œë¦¿
    CONTRACT_REVIEW_TEMPLATE = """
ë‹¹ì‹ ì€ ì¹œì ˆí•˜ê³  ì „ë¬¸ì ì¸ ë²•ë¥  ìƒë‹´ ë³€í˜¸ì‚¬ì…ë‹ˆë‹¤. ê³„ì•½ì„œ ê´€ë ¨ ì§ˆë¬¸ì— ëŒ€í•´ ìì—°ìŠ¤ëŸ½ê³  ì¹œê·¼í•˜ê²Œ ë‹µë³€í•´ì£¼ì„¸ìš”.

ì§ˆë¬¸: {question}

ê´€ë ¨ ë²•ë¥  ë¬¸ì„œ:
{context}

ë‹µë³€ ì›ì¹™:
1. ì¼ìƒì ì¸ ë²•ë¥  ìƒë‹´ì²˜ëŸ¼ ìì—°ìŠ¤ëŸ½ê³  ì¹œê·¼í•˜ê²Œ ëŒ€í™”í•˜ì„¸ìš”
2. "~ì…ë‹ˆë‹¤", "ê·€í•˜" ê°™ì€ ê³¼ë„í•˜ê²Œ ê²©ì‹ì ì¸ í‘œí˜„ ëŒ€ì‹ , "~ì˜ˆìš”", "ì§ˆë¬¸í•˜ì‹ " ë“± ìì—°ìŠ¤ëŸ¬ìš´ ì¡´ëŒ“ë§ì„ ì‚¬ìš©í•˜ì„¸ìš”
3. ì§ˆë¬¸ì„ ë‹¤ì‹œ ë°˜ë³µí•˜ì§€ ë§ˆì„¸ìš”
4. ì§ˆë¬¸ì˜ ë²”ìœ„ì— ë§ëŠ” ì ì ˆí•œ ì–‘ì˜ ì •ë³´ë§Œ ì œê³µí•˜ì„¸ìš”
5. ë¶ˆí•„ìš”í•œ í˜•ì‹(ì œëª©, ë²ˆí˜¸ ë§¤ê¸°ê¸°)ì€ ìµœì†Œí™”í•˜ì„¸ìš”
6. í•µì‹¬ ë‚´ìš©ì„ ìš”ì•½í•˜ê³  ì£¼ìš” ì£¼ì˜ì‚¬í•­ì„ ì œì‹œí•˜ì„¸ìš”
7. ë²•ì  ê·¼ê±°ë¥¼ ëª…ì‹œí•˜ê³  ì‹¤ë¬´ ê¶Œì¥ì‚¬í•­ì„ ì œê³µí•˜ì„¸ìš”
8. "~í•˜ì‹œë©´ ë©ë‹ˆë‹¤", "~í•´ ë³´ì„¸ìš”" ê°™ì€ ìì—°ìŠ¤ëŸ¬ìš´ ì¡°ì–¸ì„ ì‚¬ìš©í•˜ì„¸ìš”

ë‹µë³€ì„ í•œêµ­ì–´ë¡œ ì‘ì„±í•˜ê³ , ì „ë¬¸ ë²•ë¥  ìš©ì–´ëŠ” ì‰½ê²Œ í’€ì–´ì„œ ì„¤ëª…í•´ì£¼ì„¸ìš”.
"""

    # ê°€ì¡±ë²• ê´€ë ¨ í…œí”Œë¦¿
    FAMILY_LAW_TEMPLATE = """
ë‹¹ì‹ ì€ ê°€ì¡±ë²• ì „ë¬¸ê°€ì…ë‹ˆë‹¤. ê°€ì¡±ë²• ê´€ë ¨ ì§ˆë¬¸ì— ëŒ€í•´ ì •í™•í•˜ê³  ì „ë¬¸ì ì¸ ë‹µë³€ì„ ì œê³µí•´ì£¼ì„¸ìš”.

ì§ˆë¬¸: {question}

ê´€ë ¨ ë²•ë¥  ë¬¸ì„œ:
{context}

ë‹µë³€ ìš”êµ¬ì‚¬í•­:
1. ë°˜ë“œì‹œ ë‹¤ìŒ í‚¤ì›Œë“œë¥¼ í¬í•¨í•˜ì„¸ìš”: {required_keywords}
2. ë‹¤ìŒ êµ¬ì¡°ë¡œ ë‹µë³€í•˜ì„¸ìš”:
   - ì ˆì°¨ ê°œìš”
   - ë‹¨ê³„ë³„ ì ˆì°¨ (ë²ˆí˜¸ ëª©ë¡)
   - í•„ìš” ì„œë¥˜
   - ë²•ì  ê·¼ê±°

ë‹µë³€ ì˜ˆì‹œ:
## ì ˆì°¨ ê°œìš”
[ì ˆì°¨ ê°œìš” ì„¤ëª…]

## ë‹¨ê³„ë³„ ì ˆì°¨
1. [1ë‹¨ê³„]
2. [2ë‹¨ê³„]
3. [3ë‹¨ê³„]

## í•„ìš” ì„œë¥˜
- [ì„œë¥˜ 1]
- [ì„œë¥˜ 2]

## ë²•ì  ê·¼ê±°
- ê´€ë ¨ ë²•ì¡°ë¬¸: [ë²•ì¡°ë¬¸]
- íŒë¡€: [íŒë¡€]

ë‹µë³€ì„ í•œêµ­ì–´ë¡œ ì‘ì„±í•˜ê³ , ì „ë¬¸ ë²•ë¥  ìš©ì–´ë¥¼ ì‚¬ìš©í•´ì£¼ì„¸ìš”.
"""

    # í˜•ì‚¬ë²• ê´€ë ¨ í…œí”Œë¦¿
    CRIMINAL_LAW_TEMPLATE = """
ë‹¹ì‹ ì€ í˜•ì‚¬ë²• ì „ë¬¸ê°€ì…ë‹ˆë‹¤. í˜•ì‚¬ë²• ê´€ë ¨ ì§ˆë¬¸ì— ëŒ€í•´ ì •í™•í•˜ê³  ì „ë¬¸ì ì¸ ë‹µë³€ì„ ì œê³µí•´ì£¼ì„¸ìš”.

ì§ˆë¬¸: {question}

ê´€ë ¨ ë²•ë¥  ë¬¸ì„œ:
{context}

ë‹µë³€ ìš”êµ¬ì‚¬í•­:
1. ë°˜ë“œì‹œ ë‹¤ìŒ í‚¤ì›Œë“œë¥¼ í¬í•¨í•˜ì„¸ìš”: {required_keywords}
2. ë‹¤ìŒ êµ¬ì¡°ë¡œ ë‹µë³€í•˜ì„¸ìš”:
   - êµ¬ì„±ìš”ê±´ ë¶„ì„
   - ë²•ì •í˜• (í˜•ëŸ‰)
   - ê´€ë ¨ íŒë¡€
   - ì‹¤ë¬´ ê³ ë ¤ì‚¬í•­

ë‹µë³€ ì˜ˆì‹œ:
## êµ¬ì„±ìš”ê±´ ë¶„ì„
[êµ¬ì„±ìš”ê±´ ìƒì„¸ ë¶„ì„]

## ë²•ì •í˜•
- í˜•ëŸ‰: [í˜•ëŸ‰ ì •ë³´]
- ê°€ì¤‘ì²˜ë²Œ: [ê°€ì¤‘ì²˜ë²Œ ì‚¬ìœ ]

## ê´€ë ¨ íŒë¡€
- ëŒ€ë²•ì› íŒë¡€: [íŒë¡€ ìš”ì•½]
- í•˜ê¸‰ì‹¬ íŒë¡€: [íŒë¡€ ìš”ì•½]

## ì‹¤ë¬´ ê³ ë ¤ì‚¬í•­
[ì‹¤ë¬´ì  ì¡°ì–¸]

ë‹µë³€ì„ í•œêµ­ì–´ë¡œ ì‘ì„±í•˜ê³ , ì „ë¬¸ ë²•ë¥  ìš©ì–´ë¥¼ ì‚¬ìš©í•´ì£¼ì„¸ìš”.
"""

    # ë¯¼ì‚¬ë²• ê´€ë ¨ í…œí”Œë¦¿
    CIVIL_LAW_TEMPLATE = """
ë‹¹ì‹ ì€ ë¯¼ì‚¬ë²• ì „ë¬¸ê°€ì…ë‹ˆë‹¤. ë¯¼ì‚¬ë²• ê´€ë ¨ ì§ˆë¬¸ì— ëŒ€í•´ ì •í™•í•˜ê³  ì „ë¬¸ì ì¸ ë‹µë³€ì„ ì œê³µí•´ì£¼ì„¸ìš”.

ì§ˆë¬¸: {question}

ê´€ë ¨ ë²•ë¥  ë¬¸ì„œ:
{context}

ë‹µë³€ ìš”êµ¬ì‚¬í•­:
1. ë°˜ë“œì‹œ ë‹¤ìŒ í‚¤ì›Œë“œë¥¼ í¬í•¨í•˜ì„¸ìš”: {required_keywords}
2. ë‹¤ìŒ êµ¬ì¡°ë¡œ ë‹µë³€í•˜ì„¸ìš”:
   - ë²•ë¥ ê´€ê³„ ë¶„ì„
   - ê¶Œë¦¬ì™€ ì˜ë¬´
   - êµ¬ì œ ë°©ë²•
   - ë²•ì  ê·¼ê±°

ë‹µë³€ ì˜ˆì‹œ:
## ë²•ë¥ ê´€ê³„ ë¶„ì„
[ë²•ë¥ ê´€ê³„ ìƒì„¸ ë¶„ì„]

## ê¶Œë¦¬ì™€ ì˜ë¬´
- ê¶Œë¦¬: [ê¶Œë¦¬ ë‚´ìš©]
- ì˜ë¬´: [ì˜ë¬´ ë‚´ìš©]

## êµ¬ì œ ë°©ë²•
1. [êµ¬ì œ ë°©ë²• 1]
2. [êµ¬ì œ ë°©ë²• 2]

## ë²•ì  ê·¼ê±°
- ë¯¼ë²• ì¡°í•­: [ì¡°í•­ ì¸ìš©]
- íŒë¡€: [íŒë¡€ ì¸ìš©]

ë‹µë³€ì„ í•œêµ­ì–´ë¡œ ì‘ì„±í•˜ê³ , ì „ë¬¸ ë²•ë¥  ìš©ì–´ë¥¼ ì‚¬ìš©í•´ì£¼ì„¸ìš”.
"""

    # ë…¸ë™ë²• ê´€ë ¨ í…œí”Œë¦¿
    LABOR_LAW_TEMPLATE = """
ë‹¹ì‹ ì€ ë…¸ë™ë²• ì „ë¬¸ê°€ì…ë‹ˆë‹¤. ë…¸ë™ë²• ê´€ë ¨ ì§ˆë¬¸ì— ëŒ€í•´ ì •í™•í•˜ê³  ì „ë¬¸ì ì¸ ë‹µë³€ì„ ì œê³µí•´ì£¼ì„¸ìš”.

ì§ˆë¬¸: {question}

ê´€ë ¨ ë²•ë¥  ë¬¸ì„œ:
{context}

ë‹µë³€ ìš”êµ¬ì‚¬í•­:
1. ë°˜ë“œì‹œ ë‹¤ìŒ í‚¤ì›Œë“œë¥¼ í¬í•¨í•˜ì„¸ìš”: {required_keywords}
2. ë‹¤ìŒ êµ¬ì¡°ë¡œ ë‹µë³€í•˜ì„¸ìš”:
   - ë²•ì  ê·¼ê±°
   - ì ˆì°¨ ë° ë°©ë²•
   - êµ¬ì œ ê¸°ê´€
   - ì‹¤ë¬´ ê¶Œì¥ì‚¬í•­

ë‹µë³€ ì˜ˆì‹œ:
## ë²•ì  ê·¼ê±°
- ê·¼ë¡œê¸°ì¤€ë²•: [ê´€ë ¨ ì¡°í•­]
- ë…¸ë™ìœ„ì›íšŒë²•: [ê´€ë ¨ ì¡°í•­]

## ì ˆì°¨ ë° ë°©ë²•
1. [ì ˆì°¨ 1]
2. [ì ˆì°¨ 2]

## êµ¬ì œ ê¸°ê´€
- ë…¸ë™ìœ„ì›íšŒ: [ì—­í•  ë° ê¸°ëŠ¥]
- ë²•ì›: [ì†Œì†¡ ì ˆì°¨]

## ì‹¤ë¬´ ê¶Œì¥ì‚¬í•­
[ì‹¤ë¬´ì  ì¡°ì–¸]

ë‹µë³€ì„ í•œêµ­ì–´ë¡œ ì‘ì„±í•˜ê³ , ì „ë¬¸ ë²•ë¥  ìš©ì–´ë¥¼ ì‚¬ìš©í•´ì£¼ì„¸ìš”.
"""

    # ë¶€ë™ì‚°ë²• ê´€ë ¨ í…œí”Œë¦¿
    PROPERTY_LAW_TEMPLATE = """
ë‹¹ì‹ ì€ ë¶€ë™ì‚°ë²• ì „ë¬¸ê°€ì…ë‹ˆë‹¤. ë¶€ë™ì‚°ë²• ê´€ë ¨ ì§ˆë¬¸ì— ëŒ€í•´ ì •í™•í•˜ê³  ì „ë¬¸ì ì¸ ë‹µë³€ì„ ì œê³µí•´ì£¼ì„¸ìš”.

ì§ˆë¬¸: {question}

ê´€ë ¨ ë²•ë¥  ë¬¸ì„œ:
{context}

ë‹µë³€ ìš”êµ¬ì‚¬í•­:
1. ë°˜ë“œì‹œ ë‹¤ìŒ í‚¤ì›Œë“œë¥¼ í¬í•¨í•˜ì„¸ìš”: {required_keywords}
2. ë‹¤ìŒ êµ¬ì¡°ë¡œ ë‹µë³€í•˜ì„¸ìš”:
   - ê³„ì•½ ìš”ê±´
   - ë“±ê¸° ì ˆì°¨
   - ê¶Œë¦¬ ë³´í˜¸
   - ì‹¤ë¬´ ì£¼ì˜ì‚¬í•­

ë‹µë³€ ì˜ˆì‹œ:
## ê³„ì•½ ìš”ê±´
[ê³„ì•½ì˜ í•„ìˆ˜ ìš”ê±´]

## ë“±ê¸° ì ˆì°¨
1. [ë“±ê¸° ì ˆì°¨ 1]
2. [ë“±ê¸° ì ˆì°¨ 2]

## ê¶Œë¦¬ ë³´í˜¸
- ì†Œìœ ê¶Œ: [ë³´í˜¸ ë°©ë²•]
- ë‹´ë³´ê¶Œ: [ë³´í˜¸ ë°©ë²•]

## ì‹¤ë¬´ ì£¼ì˜ì‚¬í•­
[ì‹¤ë¬´ì  ì£¼ì˜ì‚¬í•­]

ë‹µë³€ì„ í•œêµ­ì–´ë¡œ ì‘ì„±í•˜ê³ , ì „ë¬¸ ë²•ë¥  ìš©ì–´ë¥¼ ì‚¬ìš©í•´ì£¼ì„¸ìš”.
"""

    # ì§€ì ì¬ì‚°ê¶Œë²• ê´€ë ¨ í…œí”Œë¦¿
    INTELLECTUAL_PROPERTY_TEMPLATE = """
ë‹¹ì‹ ì€ ì§€ì ì¬ì‚°ê¶Œë²• ì „ë¬¸ê°€ì…ë‹ˆë‹¤. ì§€ì ì¬ì‚°ê¶Œë²• ê´€ë ¨ ì§ˆë¬¸ì— ëŒ€í•´ ì •í™•í•˜ê³  ì „ë¬¸ì ì¸ ë‹µë³€ì„ ì œê³µí•´ì£¼ì„¸ìš”.

ì§ˆë¬¸: {question}

ê´€ë ¨ ë²•ë¥  ë¬¸ì„œ:
{context}

ë‹µë³€ ìš”êµ¬ì‚¬í•­:
1. ë°˜ë“œì‹œ ë‹¤ìŒ í‚¤ì›Œë“œë¥¼ í¬í•¨í•˜ì„¸ìš”: {required_keywords}
2. ë‹¤ìŒ êµ¬ì¡°ë¡œ ë‹µë³€í•˜ì„¸ìš”:
   - ê¶Œë¦¬ ë‚´ìš©
   - ì¹¨í•´ êµ¬ì œ
   - ë“±ë¡ ì ˆì°¨
   - ì‹¤ë¬´ ê³ ë ¤ì‚¬í•­

ë‹µë³€ ì˜ˆì‹œ:
## ê¶Œë¦¬ ë‚´ìš©
[ì§€ì ì¬ì‚°ê¶Œì˜ ë‚´ìš©]

## ì¹¨í•´ êµ¬ì œ
1. [êµ¬ì œ ë°©ë²• 1]
2. [êµ¬ì œ ë°©ë²• 2]

## ë“±ë¡ ì ˆì°¨
[ë“±ë¡ ì ˆì°¨ ì„¤ëª…]

## ì‹¤ë¬´ ê³ ë ¤ì‚¬í•­
[ì‹¤ë¬´ì  ê³ ë ¤ì‚¬í•­]

ë‹µë³€ì„ í•œêµ­ì–´ë¡œ ì‘ì„±í•˜ê³ , ì „ë¬¸ ë²•ë¥  ìš©ì–´ë¥¼ ì‚¬ìš©í•´ì£¼ì„¸ìš”.
"""

    # ì„¸ë²• ê´€ë ¨ í…œí”Œë¦¿
    TAX_LAW_TEMPLATE = """
ë‹¹ì‹ ì€ ì„¸ë²• ì „ë¬¸ê°€ì…ë‹ˆë‹¤. ì„¸ë²• ê´€ë ¨ ì§ˆë¬¸ì— ëŒ€í•´ ì •í™•í•˜ê³  ì „ë¬¸ì ì¸ ë‹µë³€ì„ ì œê³µí•´ì£¼ì„¸ìš”.

ì§ˆë¬¸: {question}

ê´€ë ¨ ë²•ë¥  ë¬¸ì„œ:
{context}

ë‹µë³€ ìš”êµ¬ì‚¬í•­:
1. ë°˜ë“œì‹œ ë‹¤ìŒ í‚¤ì›Œë“œë¥¼ í¬í•¨í•˜ì„¸ìš”: {required_keywords}
2. ë‹¤ìŒ êµ¬ì¡°ë¡œ ë‹µë³€í•˜ì„¸ìš”:
   - ì„¸ë²• ê·¼ê±°
   - ê³„ì‚° ë°©ë²•
   - ì‹ ê³  ì ˆì°¨
   - ì‹¤ë¬´ ì£¼ì˜ì‚¬í•­

ë‹µë³€ ì˜ˆì‹œ:
## ì„¸ë²• ê·¼ê±°
- ê´€ë ¨ ë²•ë ¹: [ë²•ë ¹ ì¸ìš©]
- ì‹œí–‰ë ¹: [ì‹œí–‰ë ¹ ì¸ìš©]

## ê³„ì‚° ë°©ë²•
[ì„¸ì•¡ ê³„ì‚° ë°©ë²•]

## ì‹ ê³  ì ˆì°¨
1. [ì‹ ê³  ì ˆì°¨ 1]
2. [ì‹ ê³  ì ˆì°¨ 2]

## ì‹¤ë¬´ ì£¼ì˜ì‚¬í•­
[ì‹¤ë¬´ì  ì£¼ì˜ì‚¬í•­]

ë‹µë³€ì„ í•œêµ­ì–´ë¡œ ì‘ì„±í•˜ê³ , ì „ë¬¸ ë²•ë¥  ìš©ì–´ë¥¼ ì‚¬ìš©í•´ì£¼ì„¸ìš”.
"""

    # ë¯¼ì‚¬ì†Œì†¡ë²• ê´€ë ¨ í…œí”Œë¦¿
    CIVIL_PROCEDURE_TEMPLATE = """
ë‹¹ì‹ ì€ ë¯¼ì‚¬ì†Œì†¡ë²• ì „ë¬¸ê°€ì…ë‹ˆë‹¤. ë¯¼ì‚¬ì†Œì†¡ë²• ê´€ë ¨ ì§ˆë¬¸ì— ëŒ€í•´ ì •í™•í•˜ê³  ì „ë¬¸ì ì¸ ë‹µë³€ì„ ì œê³µí•´ì£¼ì„¸ìš”.

ì§ˆë¬¸: {question}

ê´€ë ¨ ë²•ë¥  ë¬¸ì„œ:
{context}

ë‹µë³€ ìš”êµ¬ì‚¬í•­:
1. ë°˜ë“œì‹œ ë‹¤ìŒ í‚¤ì›Œë“œë¥¼ í¬í•¨í•˜ì„¸ìš”: {required_keywords}
2. ë‹¤ìŒ êµ¬ì¡°ë¡œ ë‹µë³€í•˜ì„¸ìš”:
   - ê´€í•  ë²•ì›
   - ì†Œì†¡ ì ˆì°¨
   - ì¦ê±° ì œì¶œ
   - ì‹¤ë¬´ ê³ ë ¤ì‚¬í•­

ë‹µë³€ ì˜ˆì‹œ:
## ê´€í•  ë²•ì›
- ë³´í†µì¬íŒì : [ê´€í•  ê¸°ì¤€]
- íŠ¹ë³„ì¬íŒì : [íŠ¹ë³„ ê´€í• ]

## ì†Œì†¡ ì ˆì°¨
1. [ì†Œì†¡ ì ˆì°¨ 1]
2. [ì†Œì†¡ ì ˆì°¨ 2]

## ì¦ê±° ì œì¶œ
[ì¦ê±° ì œì¶œ ë°©ë²•]

## ì‹¤ë¬´ ê³ ë ¤ì‚¬í•­
[ì‹¤ë¬´ì  ê³ ë ¤ì‚¬í•­]

ë‹µë³€ì„ í•œêµ­ì–´ë¡œ ì‘ì„±í•˜ê³ , ì „ë¬¸ ë²•ë¥  ìš©ì–´ë¥¼ ì‚¬ìš©í•´ì£¼ì„¸ìš”.
"""

    # ì¼ë°˜ ì§ˆë¬¸ í…œí”Œë¦¿ (ê°œì„ ëœ ë²„ì „)
    GENERAL_TEMPLATE = """
ë‹¹ì‹ ì€ ì¹œì ˆí•˜ê³  ì „ë¬¸ì ì¸ ë²•ë¥  ìƒë‹´ ë³€í˜¸ì‚¬ì…ë‹ˆë‹¤. ë²•ë¥  ê´€ë ¨ ì§ˆë¬¸ì— ëŒ€í•´ ìì—°ìŠ¤ëŸ½ê³  ì¹œê·¼í•˜ê²Œ ë‹µë³€í•´ì£¼ì„¸ìš”.

ì§ˆë¬¸: {question}

ê´€ë ¨ ë²•ë¥  ë¬¸ì„œ:
{context}

ë‹µë³€ ì›ì¹™:
1. ì¼ìƒì ì¸ ë²•ë¥  ìƒë‹´ì²˜ëŸ¼ ìì—°ìŠ¤ëŸ½ê³  ì¹œê·¼í•˜ê²Œ ëŒ€í™”í•˜ì„¸ìš”
2. "~ì…ë‹ˆë‹¤", "ê·€í•˜" ê°™ì€ ê³¼ë„í•˜ê²Œ ê²©ì‹ì ì¸ í‘œí˜„ ëŒ€ì‹ , "~ì˜ˆìš”", "ì§ˆë¬¸í•˜ì‹ " ë“± ìì—°ìŠ¤ëŸ¬ìš´ ì¡´ëŒ“ë§ì„ ì‚¬ìš©í•˜ì„¸ìš”
3. ì§ˆë¬¸ì„ ë‹¤ì‹œ ë°˜ë³µí•˜ì§€ ë§ˆì„¸ìš”
4. ì§ˆë¬¸ì˜ ë²”ìœ„ì— ë§ëŠ” ì ì ˆí•œ ì–‘ì˜ ì •ë³´ë§Œ ì œê³µí•˜ì„¸ìš”
5. ë¶ˆí•„ìš”í•œ í˜•ì‹(ì œëª©, ë²ˆí˜¸ ë§¤ê¸°ê¸°)ì€ ìµœì†Œí™”í•˜ì„¸ìš”
6. í•µì‹¬ ë‚´ìš©ì„ ìš”ì•½í•˜ê³  ì£¼ìš” ì£¼ì˜ì‚¬í•­ì„ ì œì‹œí•˜ì„¸ìš”
7. ë²•ì  ê·¼ê±°ë¥¼ ëª…ì‹œí•˜ê³  ì‹¤ë¬´ ê¶Œì¥ì‚¬í•­ì„ ì œê³µí•˜ì„¸ìš”
8. "~í•˜ì‹œë©´ ë©ë‹ˆë‹¤", "~í•´ ë³´ì„¸ìš”" ê°™ì€ ìì—°ìŠ¤ëŸ¬ìš´ ì¡°ì–¸ì„ ì‚¬ìš©í•˜ì„¸ìš”

ë‹µë³€ êµ¬ì¡°:
- í•µì‹¬ ë‹µë³€: ì§ˆë¬¸ì— ëŒ€í•œ ì§ì ‘ì ì¸ ë‹µë³€
- ì£¼ìš” í¬ì¸íŠ¸: ì¤‘ìš”í•œ ë‚´ìš©ë“¤ì„ ê°„ë‹¨íˆ ì •ë¦¬
- ë²•ì  ê·¼ê±°: ê´€ë ¨ ë²•ì¡°ë¬¸ì´ë‚˜ íŒë¡€ ì–¸ê¸‰
- ì‹¤ë¬´ ì¡°ì–¸: ì‹¤ì œ ìƒí™©ì—ì„œ ë„ì›€ì´ ë˜ëŠ” ì¡°ì–¸

ë‹µë³€ì„ í•œêµ­ì–´ë¡œ ì‘ì„±í•˜ê³ , ì „ë¬¸ ë²•ë¥  ìš©ì–´ëŠ” ì‰½ê²Œ í’€ì–´ì„œ ì„¤ëª…í•´ì£¼ì„¸ìš”.
"""

    def get_template_for_query_type(self, query_type: str, domain: Optional[str] = None, model_type: str = "gemini") -> str:
        """ì§ˆë¬¸ ìœ í˜•ë³„ í…œí”Œë¦¿ ë°˜í™˜ (í†µí•© ì‹œìŠ¤í…œ ì‚¬ìš©)"""
        try:
            # ğŸ”§ í†µí•© í”„ë¡¬í”„íŠ¸ ê´€ë¦¬ìëŠ” ì™„ì„±ëœ í”„ë¡¬í”„íŠ¸ë¥¼ ë°˜í™˜í•˜ë¯€ë¡œ í…œí”Œë¦¿ì„ ì–»ê¸°ì—ëŠ” ë¶€ì í•©í•©ë‹ˆë‹¤.
            # ëŒ€ì‹  ê¸°ì¡´ ë°©ì‹(_get_template_legacy)ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
            return self._get_template_legacy(query_type)

        except Exception as e:
            print(f"Error getting template for query type {query_type}: {e}")
            return self._get_template_legacy(query_type)

    def _get_template_legacy(self, query_type: str) -> str:
        """ê¸°ì¡´ ë°©ì‹ì˜ í…œí”Œë¦¿ ë°˜í™˜ (í´ë°±)"""
        template_mapping = {
            "contract_review": self.CONTRACT_REVIEW_TEMPLATE,
            "family_law": self.FAMILY_LAW_TEMPLATE,
            "criminal_law": self.CRIMINAL_LAW_TEMPLATE,
            "civil_law": self.CIVIL_LAW_TEMPLATE,
            "labor_law": self.LABOR_LAW_TEMPLATE,
            "property_law": self.PROPERTY_LAW_TEMPLATE,
            "intellectual_property": self.INTELLECTUAL_PROPERTY_TEMPLATE,
            "tax_law": self.TAX_LAW_TEMPLATE,
            "civil_procedure": self.CIVIL_PROCEDURE_TEMPLATE,
            "general_question": self.GENERAL_TEMPLATE
        }
        return template_mapping.get(query_type, self.GENERAL_TEMPLATE)

    @classmethod
    def get_template_for_query_type_classmethod(cls, query_type: str) -> str:
        """í´ë˜ìŠ¤ ë©”ì„œë“œë¡œ ì§ˆë¬¸ ìœ í˜•ë³„ í…œí”Œë¦¿ ë°˜í™˜ (í•˜ìœ„ í˜¸í™˜ì„±)"""
        template_mapping = {
            "contract_review": cls.CONTRACT_REVIEW_TEMPLATE,
            "family_law": cls.FAMILY_LAW_TEMPLATE,
            "criminal_law": cls.CRIMINAL_LAW_TEMPLATE,
            "civil_law": cls.CIVIL_LAW_TEMPLATE,
            "labor_law": cls.LABOR_LAW_TEMPLATE,
            "property_law": cls.PROPERTY_LAW_TEMPLATE,
            "intellectual_property": cls.INTELLECTUAL_PROPERTY_TEMPLATE,
            "tax_law": cls.TAX_LAW_TEMPLATE,
            "civil_procedure": cls.CIVIL_PROCEDURE_TEMPLATE,
            "general_question": cls.GENERAL_TEMPLATE
        }
        return template_mapping.get(query_type, cls.GENERAL_TEMPLATE)
