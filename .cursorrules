# LawFirmAI - Cursor Development Rules

## ğŸ“‹ ëª©ì°¨

1. [í”„ë¡œì íŠ¸ ê°œìš”](#í”„ë¡œì íŠ¸-ê°œìš”)
2. [í”„ë¡œì íŠ¸ êµ¬ì¡° ê·œì¹™](#í”„ë¡œì íŠ¸-êµ¬ì¡°-ê·œì¹™)
3. [ìƒì„¸ ê·œì¹™ ì°¸ì¡°](#ìƒì„¸-ê·œì¹™-ì°¸ì¡°)
4. [ì„±ëŠ¥ ìµœì í™” ê·œì¹™](#ì„±ëŠ¥-ìµœì í™”-ê·œì¹™)
5. [ë¬¸ì„œí™” ê·œì¹™](#ë¬¸ì„œí™”-ê·œì¹™)
6. [ë³´ì•ˆ ê·œì¹™](#ë³´ì•ˆ-ê·œì¹™)
7. [ë°°í¬ ê·œì¹™](#ë°°í¬-ê·œì¹™)
8. [Git ê·œì¹™](#git-ê·œì¹™)
9. [ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ê·œì¹™](#ì„±ëŠ¥-ëª¨ë‹ˆí„°ë§-ê·œì¹™)
10. [ì½”ë“œ ë¦¬ë·° ì²´í¬ë¦¬ìŠ¤íŠ¸](#ì½”ë“œ-ë¦¬ë·°-ì²´í¬ë¦¬ìŠ¤íŠ¸)
11. [í…ŒìŠ¤íŠ¸ ë¡œê·¸ íŒŒì¼ ì €ì¥ ê·œì¹™](#í…ŒìŠ¤íŠ¸-ë¡œê·¸-íŒŒì¼-ì €ì¥-ê·œì¹™)

---

## í”„ë¡œì íŠ¸ ê°œìš”
- **í”„ë¡œì íŠ¸ëª…**: LawFirmAI (ë²•ë¥  AI ì–´ì‹œìŠ¤í„´íŠ¸)
- **ëª©í‘œ**: HuggingFace Spaces ë°°í¬ë¥¼ ìœ„í•œ ë²•ë¥  AI ì‹œìŠ¤í…œ ê°œë°œ
- **ê¸°ìˆ  ìŠ¤íƒ**: LangGraph + FastAPI + React + Google Gemini 2.5 Flash Lite + FAISS + SQLite

## í”„ë¡œì íŠ¸ êµ¬ì¡° ê·œì¹™

### ë””ë ‰í† ë¦¬ êµ¬ì¡°
```
LawFirmAI/
â”œâ”€â”€ lawfirm_langgraph/      # í•µì‹¬ LangGraph ì›Œí¬í”Œë¡œìš° ì‹œìŠ¤í…œ
â”‚   â”œâ”€â”€ config/             # ì„¤ì • íŒŒì¼
â”‚   â”œâ”€â”€ core/               # í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”‚   â”œâ”€â”€ workflow/       # LangGraph ì›Œí¬í”Œë¡œìš° (ë©”ì¸)
â”‚   â”‚   â”œâ”€â”€ search/         # ê²€ìƒ‰ ì‹œìŠ¤í…œ
â”‚   â”‚   â”œâ”€â”€ generation/     # ë‹µë³€ ìƒì„± ì‹œìŠ¤í…œ
â”‚   â”‚   â”œâ”€â”€ classification/ # ë¶„ë¥˜ ì‹œìŠ¤í…œ
â”‚   â”‚   â”œâ”€â”€ processing/     # ë°ì´í„° ì²˜ë¦¬
â”‚   â”‚   â”œâ”€â”€ agents/         # ì—ì´ì „íŠ¸ ë° ìœ í‹¸ë¦¬í‹°
â”‚   â”‚   â”œâ”€â”€ services/       # ë¹„ì¦ˆë‹ˆìŠ¤ ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ data/           # ë°ì´í„° ë ˆì´ì–´
â”‚   â”‚   â”œâ”€â”€ shared/         # ê³µìœ  ìœ í‹¸ë¦¬í‹°
â”‚   â”‚   â””â”€â”€ utils/          # ìœ í‹¸ë¦¬í‹°
â”‚   â”œâ”€â”€ tests/              # í…ŒìŠ¤íŠ¸ ì½”ë“œ
â”‚   â””â”€â”€ data/               # ë°ì´í„° íŒŒì¼
â”œâ”€â”€ api/                    # FastAPI ì• í”Œë¦¬ì¼€ì´ì…˜
â”‚   â”œâ”€â”€ main.py            # FastAPI ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜
â”‚   â”œâ”€â”€ requirements.txt   # FastAPI ì˜ì¡´ì„±
â”‚   â”œâ”€â”€ routers/           # API ë¼ìš°í„°
â”‚   â”œâ”€â”€ services/          # API ì„œë¹„ìŠ¤
â”‚   â”œâ”€â”€ schemas/           # Pydantic ìŠ¤í‚¤ë§ˆ
â”‚   â””â”€â”€ middleware/        # ë¯¸ë“¤ì›¨ì–´
â”œâ”€â”€ frontend/               # React í”„ë¡ íŠ¸ì—”ë“œ
â”‚   â”œâ”€â”€ src/                # React ì†ŒìŠ¤ ì½”ë“œ
â”‚   â”œâ”€â”€ package.json        # npm ì˜ì¡´ì„±
â”‚   â”œâ”€â”€ vite.config.ts      # Vite ì„¤ì •
â”‚   â””â”€â”€ Dockerfile          # React Docker ì„¤ì •
â”œâ”€â”€ scripts/                # ìœ í‹¸ë¦¬í‹° ìŠ¤í¬ë¦½íŠ¸
â”‚   â”œâ”€â”€ checks/             # ì²´í¬ ìŠ¤í¬ë¦½íŠ¸
â”‚   â”œâ”€â”€ ingest/             # ë°ì´í„° ìˆ˜ì§‘
â”‚   â”œâ”€â”€ rag/                # RAG ê´€ë ¨ ìŠ¤í¬ë¦½íŠ¸
â”‚   â””â”€â”€ tests/              # í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ data/                   # ë°ì´í„° íŒŒì¼
â”‚   â”œâ”€â”€ raw/                # ì›ë³¸ ë°ì´í„°
â”‚   â”œâ”€â”€ processed/          # ì „ì²˜ë¦¬ëœ ë°ì´í„°
â”‚   â””â”€â”€ embeddings/         # ë²¡í„° ì„ë² ë”©
â”œâ”€â”€ docs/                   # í”„ë¡œì íŠ¸ ë¬¸ì„œ
â”œâ”€â”€ .env.example            # í™˜ê²½ ë³€ìˆ˜ í…œí”Œë¦¿
â”œâ”€â”€ .gitignore              # Git ë¬´ì‹œ íŒŒì¼
â””â”€â”€ README.md               # í”„ë¡œì íŠ¸ ë¬¸ì„œ
```

## ìƒì„¸ ê·œì¹™ ì°¸ì¡°

ìƒì„¸í•œ ê°œë°œ ê·œì¹™ì€ `docs/11.cursor_rules/` í´ë”ì— ë¶„ë¦¬ë˜ì–´ ìˆìŠµë‹ˆë‹¤:

- **`docs/11.cursor_rules/01_coding_rules.md`**: ì½”ë”© ê·œì¹™
  - ì½”ë“œ ìˆ˜ì • ìš°ì„  ì›ì¹™ (CRITICAL)
  - ì½”ë“œ ë³€ê²½ ìµœì†Œí™” ì›ì¹™ (CRITICAL)
  - íŒŒì¼ ëª…ëª… ê·œì¹™
  - Import ê·œì¹™
  - í´ë˜ìŠ¤ êµ¬ì¡° ê·œì¹™
  - ì—ëŸ¬ ì²˜ë¦¬ ê·œì¹™
  - Linter ì˜¤ë¥˜ ë°©ì§€ ê·œì¹™ (CRITICAL)

- **`docs/11.cursor_rules/02_tech_stack_rules.md`**: ê¸°ìˆ  ìŠ¤íƒë³„ ê·œì¹™
  - Pydantic V2 ê·œì¹™ (CRITICAL)
  - FastAPI ê·œì¹™
  - React ê·œì¹™
  - AI ëª¨ë¸ ê·œì¹™
  - í•œêµ­ì–´ ë¶ˆìš©ì–´ ì²˜ë¦¬ ê·œì¹™ (CRITICAL)
  - Batch File (.bat) ê·œì¹™

- **`docs/11.cursor_rules/03_langgraph_rules.md`**: LangGraph ê°œë°œ ê·œì¹™ (CRITICAL)
  - Node ì •ì˜ ë° ì‚¬ìš© ê·œì¹™
  - Edge ì •ì˜ ë° ì‚¬ìš© ê·œì¹™
  - Task ì •ì˜ ë° ì‚¬ìš© ê·œì¹™
  - StateGraph êµ¬ì¶• íŒ¨í„´
  - Subgraph ì‚¬ìš© ê·œì¹™
  - State ê´€ë¦¬ ê·œì¹™
  - ì—ëŸ¬ ì²˜ë¦¬ ê·œì¹™
  - í…ŒìŠ¤íŠ¸ ê·œì¹™
  - ì„±ëŠ¥ ìµœì í™” ê·œì¹™
  - ê¸ˆì§€ ì‚¬í•­ ë° ì²´í¬ë¦¬ìŠ¤íŠ¸

- **`docs/11.cursor_rules/04_database_rules.md`**: ë°ì´í„°ë² ì´ìŠ¤ ê·œì¹™
  - ì—°ê²° í’€ë§ ì‹œìŠ¤í…œ ì‚¬ìš© ê·œì¹™ (CRITICAL)
  - ê¸°ë³¸ ë°ì´í„°ë² ì´ìŠ¤ ê·œì¹™

- **`docs/11.cursor_rules/05_logging_rules.md`**: ë¡œê¹… ê·œì¹™ (CRITICAL)
  - ë¡œê±° ìƒì„± ë°©ë²•
  - í™˜ê²½ ë³€ìˆ˜ë¡œ ë¡œê·¸ ë ˆë²¨ ì œì–´
  - Windows í™˜ê²½ ì£¼ì˜ì‚¬í•­ (CRITICAL)
  - ì˜ˆì™¸ ë¡œê¹…
  - ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œê¹… ì œì–´

- **`docs/11.cursor_rules/06_testing_rules.md`**: í…ŒìŠ¤íŠ¸ ê·œì¹™
  - ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
  - í†µí•© í…ŒìŠ¤íŠ¸
  - LangGraph ì§ˆì˜ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ê·œì¹™ (CRITICAL)

**ê¸°ì¡´ íŒŒì¼**: `docs/11.cursor_rules/run_query_test_logging.md` - í…ŒìŠ¤íŠ¸ ë¡œê·¸ íŒŒì¼ ì €ì¥ ê·œì¹™ (ìƒì„¸ ë‚´ìš©ì€ ë³¸ ë¬¸ì„œ í•˜ë‹¨ ì°¸ì¡°)

## ì„±ëŠ¥ ìµœì í™” ê·œì¹™

### 1. ë©”ëª¨ë¦¬ ê´€ë¦¬
- ëª¨ë¸ ë¡œë”© ì‹œ ì§€ì—° ë¡œë”© ì‚¬ìš©
- ë¶ˆí•„ìš”í•œ ë³€ìˆ˜ ì¦‰ì‹œ ì‚­ì œ (`del variable`)
- ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ëª¨ë‹ˆí„°ë§

### 2. ìºì‹± ì „ëµ
```python
from functools import lru_cache
from typing import Optional

class CachedService:
    """ìºì‹±ì´ ì ìš©ëœ ì„œë¹„ìŠ¤"""
    
    def __init__(self):
        self._cache = {}
    
    @lru_cache(maxsize=128)
    def cached_operation(self, key: str) -> str:
        """ìºì‹±ëœ ì—°ì‚°"""
        if key in self._cache:
            return self._cache[key]
        
        result = self._expensive_operation(key)
        self._cache[key] = result
        return result
```

### 3. ë¹„ë™ê¸° ì²˜ë¦¬
```python
import asyncio
from typing import List, Dict, Any

class AsyncService:
    """ë¹„ë™ê¸° ì„œë¹„ìŠ¤"""
    
    async def process_batch(self, items: List[str]) -> List[Dict[str, Any]]:
        """ë°°ì¹˜ ì²˜ë¦¬"""
        tasks = [self._process_item(item) for item in items]
        results = await asyncio.gather(*tasks, return_exceptions=True)
        return results
    
    async def _process_item(self, item: str) -> Dict[str, Any]:
        """ê°œë³„ ì•„ì´í…œ ì²˜ë¦¬"""
        # ë¹„ë™ê¸° ì²˜ë¦¬ ë¡œì§
        pass
```

## ë¬¸ì„œí™” ê·œì¹™

**ì¤‘ìš”**: ë¬¸ì„œí™” ê·œì¹™ì€ **ìƒˆë¡œìš´ ì½”ë“œ ì‘ì„± ì‹œ**ì—ë§Œ ì ìš©ë©ë‹ˆë‹¤. ê¸°ì¡´ ì½”ë“œì— ë¬¸ì„œí™”ê°€ ì—†ëŠ” ê²½ìš°, ê°•ì œë¡œ ì¶”ê°€í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

### ìƒì„¸ ê¸°ëŠ¥ ì„¤ëª… ì‘ì„± ê·œì¹™ (CRITICAL)

**ìƒì„¸ ê¸°ëŠ¥ì— ëŒ€í•œ ì„¤ëª…ì€ ë°˜ë“œì‹œ `docs/` í´ë”ì—ë§Œ ì‘ì„±í•©ë‹ˆë‹¤.**

#### ì›ì¹™
1. **ìƒì„¸ ì„¤ëª…ì€ docs í´ë”ì—ë§Œ ì‘ì„±**
   - ê¸°ëŠ¥ì˜ ìƒì„¸í•œ ì„¤ëª…, ì•„í‚¤í…ì²˜, ì„¤ê³„ ì˜ë„ ë“±ì€ `docs/` í´ë”ì˜ ë§ˆí¬ë‹¤ìš´ íŒŒì¼ì—ë§Œ ì‘ì„±
   - ì½”ë“œ íŒŒì¼ì—ëŠ” ìµœì†Œí•œì˜ ì£¼ì„ë§Œ ì‘ì„± (ì½”ë“œ ìì²´ë¡œ ì´í•´ ê°€ëŠ¥í•œ ê²½ìš° ì£¼ì„ ì—†ìŒ)
   - ì½”ë“œ ë‚´ë¶€ì— ê¸´ ì„¤ëª…ì´ë‚˜ ë¬¸ì„œí™” ë¬¸ìì—´(docstring)ì„ ê³¼ë„í•˜ê²Œ ì‘ì„±í•˜ì§€ ì•ŠìŒ

2. **ì½”ë“œ íŒŒì¼ ì‘ì„± ê·œì¹™**
   ```python
   # âŒ ë‚˜ìœ ì˜ˆ: ì½”ë“œ íŒŒì¼ì— ìƒì„¸ ì„¤ëª… ì‘ì„±
   def process_legal_document(document: str) -> Dict[str, Any]:
       """
       ë²•ë¥  ë¬¸ì„œë¥¼ ë¶„ì„í•˜ê³  ì²˜ë¦¬í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.
       
       ì´ í•¨ìˆ˜ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë‹¨ê³„ë¡œ ë™ì‘í•©ë‹ˆë‹¤:
       1. ë¬¸ì„œë¥¼ ì „ì²˜ë¦¬í•˜ì—¬ ë¶ˆí•„ìš”í•œ ê³µë°±ê³¼ íŠ¹ìˆ˜ë¬¸ìë¥¼ ì œê±°í•©ë‹ˆë‹¤.
       2. ë¬¸ì„œë¥¼ í† í°í™”í•˜ì—¬ ë‹¨ì–´ ë‹¨ìœ„ë¡œ ë¶„ë¦¬í•©ë‹ˆë‹¤.
       3. ê° í† í°ì— ëŒ€í•´ ë²•ë¥  ìš©ì–´ ì‚¬ì „ì„ ì°¸ì¡°í•˜ì—¬ ì˜ë¯¸ë¥¼ ë¶„ì„í•©ë‹ˆë‹¤.
       4. ë¶„ì„ ê²°ê³¼ë¥¼ ë°”íƒ•ìœ¼ë¡œ ë¬¸ì„œì˜ ì£¼ìš” ë‚´ìš©ì„ ì¶”ì¶œí•©ë‹ˆë‹¤.
       5. ì¶”ì¶œëœ ë‚´ìš©ì„ êµ¬ì¡°í™”ëœ í˜•ì‹ìœ¼ë¡œ ë°˜í™˜í•©ë‹ˆë‹¤.
       
       ì„±ëŠ¥ ìµœì í™”ë¥¼ ìœ„í•´ ìºì‹± ë©”ì»¤ë‹ˆì¦˜ì„ ì‚¬ìš©í•˜ë©°,
       ë™ì‹œì— ì—¬ëŸ¬ ë¬¸ì„œë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ì§€ì›í•©ë‹ˆë‹¤.
       """
       # í•¨ìˆ˜ êµ¬í˜„
       pass
   
   # âœ… ì¢‹ì€ ì˜ˆ: ì½”ë“œ íŒŒì¼ì—ëŠ” ìµœì†Œí•œì˜ ì„¤ëª…ë§Œ
   def process_legal_document(document: str) -> Dict[str, Any]:
       """ë²•ë¥  ë¬¸ì„œë¥¼ ë¶„ì„í•˜ê³  ì²˜ë¦¬í•©ë‹ˆë‹¤."""
       # í•¨ìˆ˜ êµ¬í˜„
       pass
   ```

3. **docs í´ë” êµ¬ì¡°**
   - `docs/01_getting_started/`: ì‹œì‘ ê°€ì´ë“œ
   - `docs/02_data/`: ë°ì´í„° ê´€ë ¨ ë¬¸ì„œ
   - `docs/03_rag_system/`: RAG ì‹œìŠ¤í…œ ë¬¸ì„œ
   - `docs/04_models/`: ëª¨ë¸ ê´€ë ¨ ë¬¸ì„œ
   - `docs/05_quality/`: í’ˆì§ˆ ê´€ë ¨ ë¬¸ì„œ
   - `docs/06_deployment/`: ë°°í¬ ê´€ë ¨ ë¬¸ì„œ
   - `docs/07_api/`: API ê´€ë ¨ ë¬¸ì„œ
   - `docs/08_features/`: ê¸°ëŠ¥ ìƒì„¸ ì„¤ëª…
   - `docs/09_user_guide/`: ì‚¬ìš©ì ê°€ì´ë“œ
   - `docs/10_technical_reference/`: ê¸°ìˆ  ì°¸ê³  ë¬¸ì„œ
   - `docs/11.cursor_rules/`: ì»¤ì„œ ê·œì¹™ ë¬¸ì„œ (ìƒì„¸ ê·œì¹™ì€ ì—¬ê¸° ì°¸ì¡°)

### í•¨ìˆ˜ ë° í´ë˜ìŠ¤ ë¬¸ì„œí™”
```python
def process_legal_document(
    document: str,
    document_type: str = "contract",
    analysis_depth: int = 1
) -> Dict[str, Any]:
    """ë²•ë¥  ë¬¸ì„œë¥¼ ë¶„ì„í•˜ê³  ì²˜ë¦¬í•©ë‹ˆë‹¤."""
    pass

class LegalDocumentAnalyzer:
    """ë²•ë¥  ë¬¸ì„œ ë¶„ì„ì„ ìœ„í•œ í´ë˜ìŠ¤"""
    pass
```

**ì°¸ê³ **: ìƒì„¸í•œ ë¬¸ì„œí™” ì˜ˆì‹œëŠ” `docs/10_technical_reference/development_rules.md` ì°¸ì¡°

## ë³´ì•ˆ ê·œì¹™

### 1. ì…ë ¥ ê²€ì¦
```python
from pydantic import BaseModel, field_validator
from typing import Optional

class SecureRequest(BaseModel):
    """ë³´ì•ˆì´ ì ìš©ëœ ìš”ì²­ ëª¨ë¸"""
    message: str
    user_id: Optional[str] = None
    
    @field_validator('message')
    @classmethod
    def validate_message(cls, v):
        if not v or len(v.strip()) == 0:
            raise ValueError('ë©”ì‹œì§€ëŠ” ë¹„ì–´ìˆì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤')
        if len(v) > 10000:
            raise ValueError('ë©”ì‹œì§€ê°€ ë„ˆë¬´ ê¹ë‹ˆë‹¤')
        return v.strip()
    
    @field_validator('user_id')
    @classmethod
    def validate_user_id(cls, v):
        if v and not v.isalnum():
            raise ValueError('ì‚¬ìš©ì IDëŠ” ì˜ìˆ«ìë§Œ í—ˆìš©ë©ë‹ˆë‹¤')
        return v
```

### 2. í™˜ê²½ ë³€ìˆ˜ ê´€ë¦¬
```python
import os
from typing import Optional

class Config:
    """ì„¤ì • ê´€ë¦¬ í´ë˜ìŠ¤"""
    
    def __init__(self):
        self.database_url = os.getenv("DATABASE_URL", "sqlite:///./data/lawfirm.db")
        self.model_path = os.getenv("MODEL_PATH", "./models")
        self.api_key = os.getenv("API_KEY")
        
        if not self.api_key:
            raise ValueError("API_KEY í™˜ê²½ë³€ìˆ˜ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤")
```

## ë°°í¬ ê·œì¹™

### 1. Docker ìµœì í™”

#### React Dockerfile
```dockerfile
# frontend/Dockerfile
# ë©€í‹°ìŠ¤í…Œì´ì§€ ë¹Œë“œ ì‚¬ìš©
FROM node:18-alpine as builder

WORKDIR /app
COPY frontend/package*.json ./
RUN npm ci

COPY frontend/ ./
RUN npm run build

FROM nginx:alpine

# ë¹Œë“œëœ íŒŒì¼ ë³µì‚¬
COPY --from=builder /app/dist /usr/share/nginx/html

# Nginx ì„¤ì •
COPY frontend/nginx.conf /etc/nginx/conf.d/default.conf

EXPOSE 80

CMD ["nginx", "-g", "daemon off;"]
```

#### FastAPI Dockerfile
```dockerfile
# api/Dockerfile
# ë©€í‹°ìŠ¤í…Œì´ì§€ ë¹Œë“œ ì‚¬ìš©
FROM python:3.9-slim as builder

WORKDIR /app
COPY api/requirements.txt .
RUN pip install --no-cache-dir --user -r requirements.txt

FROM python:3.9-slim

# ë³´ì•ˆì„ ìœ„í•œ non-root ì‚¬ìš©ì ìƒì„±
RUN useradd --create-home --shell /bin/bash app
USER app

WORKDIR /app

# ë¹Œë“œëœ íŒ¨í‚¤ì§€ ë³µì‚¬
COPY --from=builder /root/.local /home/app/.local

# ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œ ë³µì‚¬
COPY --chown=app:app api/ ./api/
COPY --chown=app:app lawfirm_langgraph/ ./lawfirm_langgraph/

# PATH ì„¤ì •
ENV PATH=/home/app/.local/bin:$PATH

EXPOSE 8000

CMD ["python", "api/main.py"]
```

### 2. í™˜ê²½ë³„ ì„¤ì •
```python
# config.py
import os
from enum import Enum

class Environment(Enum):
    DEVELOPMENT = "development"
    STAGING = "staging"
    PRODUCTION = "production"

class Config:
    def __init__(self):
        self.env = Environment(os.getenv("ENVIRONMENT", "development"))
        self.debug = self.env == Environment.DEVELOPMENT
        self.log_level = "DEBUG" if self.debug else "INFO"
```

## Git ê·œì¹™

### 1. ì»¤ë°‹ ë©”ì‹œì§€ ê·œì¹™
```
<type>(<scope>): <subject>

<body>

<footer>
```

**Type**: feat, fix, docs, style, refactor, test, chore
**Scope**: models, services, api, data, utils
**Subject**: 50ì ì´ë‚´, ëª…ë ¹í˜•
**Body**: 72ì ì´ë‚´ë¡œ ì¤„ë°”ê¿ˆ, ë¬´ì—‡ì„ ì™œ ë³€ê²½í–ˆëŠ”ì§€ ì„¤ëª…
**Footer**: Breaking changes, Issues ì°¸ì¡°

**ì˜ˆì‹œ**:
```
feat(chat): add message validation and error handling

- Add input validation for chat messages
- Implement proper error handling for invalid inputs
- Add logging for debugging purposes

Closes #123
```

### 2. ë¸Œëœì¹˜ ê·œì¹™
- `main`: í”„ë¡œë•ì…˜ ë¸Œëœì¹˜
- `develop`: ê°œë°œ ë¸Œëœì¹˜
- `feature/`: ê¸°ëŠ¥ ê°œë°œ ë¸Œëœì¹˜
- `hotfix/`: ê¸´ê¸‰ ìˆ˜ì • ë¸Œëœì¹˜
- `release/`: ë¦´ë¦¬ìŠ¤ ì¤€ë¹„ ë¸Œëœì¹˜

## ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ê·œì¹™

### 1. ë©”íŠ¸ë¦­ ìˆ˜ì§‘
```python
import time
from functools import wraps

def measure_time(func):
    """ì‹¤í–‰ ì‹œê°„ ì¸¡ì • ë°ì½”ë ˆì´í„°"""
    @wraps(func)
    def wrapper(*args, **kwargs):
        start_time = time.time()
        result = func(*args, **kwargs)
        end_time = time.time()
        
        logger.info(f"{func.__name__} executed in {end_time - start_time:.2f} seconds")
        return result
    return wrapper
```

## ì½”ë“œ ë¦¬ë·° ì²´í¬ë¦¬ìŠ¤íŠ¸

### í•„ìˆ˜ ì²´í¬ í•­ëª©
- [ ] **ê¸°ì¡´ íŒŒì¼ ìˆ˜ì •ì„ ìš°ì„ ì ìœ¼ë¡œ ê³ ë ¤í–ˆëŠ”ê°€?** (CRITICAL)
- [ ] **ì‹ ê·œ íŒŒì¼ ìƒì„±ì´ ì •ë§ í•„ìš”í•œê°€?** (ê¸°ì¡´ íŒŒì¼ ìˆ˜ì •ìœ¼ë¡œ ë¶ˆê°€ëŠ¥í•œê°€?)
- [ ] **ì›ë³¸ ì½”ë“œë¥¼ ìµœëŒ€í•œ ë³´ì¡´í–ˆëŠ”ê°€?** (CRITICAL)
- [ ] **ë¶ˆí•„ìš”í•œ ì£¼ì„ì„ ê³¼ë„í•˜ê²Œ ì¶”ê°€í•˜ì§€ ì•Šì•˜ëŠ”ê°€?** (CRITICAL)
- [ ] **ìƒì„¸ ê¸°ëŠ¥ ì„¤ëª…ì´ docs í´ë”ì—ë§Œ ì‘ì„±ë˜ì—ˆëŠ”ê°€?** (ì½”ë“œ íŒŒì¼ì— ìƒì„¸ ì„¤ëª… ì‘ì„± ê¸ˆì§€) (CRITICAL)
- [ ] **Pydantic V2 ìŠ¤íƒ€ì¼ì„ ì‚¬ìš©í–ˆëŠ”ê°€?** (`@field_validator` ì‚¬ìš©, `@validator` ì‚¬ìš© ê¸ˆì§€) (CRITICAL)
- [ ] **í•œêµ­ì–´ ë¶ˆìš©ì–´ ì²˜ë¦¬ ì‹œ KoNLPyë¥¼ ìš°ì„ ì ìœ¼ë¡œ ì‚¬ìš©í–ˆëŠ”ê°€?** (KoNLPy ì‚¬ìš© ê°€ëŠ¥ ì‹œ í˜•íƒœì†Œ ë¶„ì„ ì‚¬ìš©, í´ë°± êµ¬í˜„ í•„ìˆ˜) (CRITICAL)
- [ ] **ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í’€ë§ ì‹œìŠ¤í…œì„ ì‚¬ìš©í–ˆëŠ”ê°€?** (`sqlite3.connect()` ì§ì ‘ í˜¸ì¶œ ê¸ˆì§€, `get_connection_pool()` ì‚¬ìš© í•„ìˆ˜) (CRITICAL)
- [ ] **Linter ì˜¤ë¥˜ê°€ ì—†ëŠ”ê°€?** (ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” ë³€ìˆ˜, í”Œë ˆì´ìŠ¤í™€ë” ì—†ëŠ” f-string, ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” import ë“±) (CRITICAL)
- [ ] **LangGraph Node/Edge/Taskë¥¼ ì˜¬ë°”ë¥´ê²Œ ì‚¬ìš©í–ˆëŠ”ê°€?** (Node ì‹œê·¸ë‹ˆì²˜, State ê´€ë¦¬, ë¼ìš°íŒ… í•¨ìˆ˜ ë“±) (CRITICAL)
- [ ] ì½”ë“œê°€ í”„ë¡œì íŠ¸ êµ¬ì¡° ê·œì¹™ì„ ë”°ë¥´ëŠ”ê°€? (`lawfirm_langgraph/` êµ¬ì¡° ì‚¬ìš©)
- [ ] í•¨ìˆ˜ì™€ í´ë˜ìŠ¤ì— ì ì ˆí•œ ë¬¸ì„œí™”ê°€ ìˆëŠ”ê°€?
- [ ] ì—ëŸ¬ ì²˜ë¦¬ê°€ ì ì ˆíˆ êµ¬í˜„ë˜ì–´ ìˆëŠ”ê°€?
- [ ] í…ŒìŠ¤íŠ¸ ì½”ë“œê°€ ì‘ì„±ë˜ì–´ ìˆëŠ”ê°€?
- [ ] ì„±ëŠ¥ ìµœì í™”ê°€ ê³ ë ¤ë˜ì—ˆëŠ”ê°€?
- [ ] ë³´ì•ˆ ê²€ì¦ì´ ì ìš©ë˜ì–´ ìˆëŠ”ê°€?
- [ ] ë¡œê¹…ì´ ì ì ˆíˆ êµ¬í˜„ë˜ì–´ ìˆëŠ”ê°€?

### ê¶Œì¥ ì²´í¬ í•­ëª©
- [ ] ì½”ë“œê°€ ì¬ì‚¬ìš© ê°€ëŠ¥í•œê°€?
- [ ] ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ ìµœì í™”ë˜ì–´ ìˆëŠ”ê°€?
- [ ] ë¹„ë™ê¸° ì²˜ë¦¬ê°€ í•„ìš”í•œ ë¶€ë¶„ì— ì ìš©ë˜ì—ˆëŠ”ê°€?
- [ ] ìºì‹± ì „ëµì´ ì ì ˆí•œê°€?
- [ ] ëª¨ë‹ˆí„°ë§ì´ ê°€ëŠ¥í•œê°€?

## í…ŒìŠ¤íŠ¸ ë¡œê·¸ íŒŒì¼ ì €ì¥ ê·œì¹™

### run_query_test.py ë¡œê·¸ íŒŒì¼ ì €ì¥

**run_query_test.py** ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•  ë•Œ ë¡œê·¸ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•˜ì—¬ ë¶„ì„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### ìë™ ë¡œê·¸ íŒŒì¼ ìƒì„± (ê¸°ë³¸)

ê¸°ë³¸ì ìœ¼ë¡œ ë¡œê·¸ íŒŒì¼ì€ ìë™ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤:

```bash
python lawfirm_langgraph/tests/scripts/run_query_test.py "ê³„ì•½ í•´ì§€ ì‚¬ìœ ì— ëŒ€í•´ ì•Œë ¤ì£¼ì„¸ìš”"
```

**ë¡œê·¸ íŒŒì¼ ìœ„ì¹˜**: `logs/test/run_query_test_YYYYMMDD_HHMMSS.log`

#### í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

**ë¡œê·¸ íŒŒì¼ ê²½ë¡œ ì§€ì •**:
```powershell
$env:TEST_LOG_FILE="logs/test/my_test.log"
python lawfirm_langgraph/tests/scripts/run_query_test.py "ì§ˆì˜ ë‚´ìš©"
```

**ë¡œê·¸ ë””ë ‰í† ë¦¬ ë³€ê²½**:
```powershell
$env:TEST_LOG_DIR="logs/custom_test"
python lawfirm_langgraph/tests/scripts/run_query_test.py "ì§ˆì˜ ë‚´ìš©"
```

**ë¡œê·¸ ë ˆë²¨ ì„¤ì •**:
```powershell
$env:TEST_LOG_LEVEL="DEBUG"  # DEBUG, INFO, WARNING, ERROR
python lawfirm_langgraph/tests/scripts/run_query_test.py "ì§ˆì˜ ë‚´ìš©"
```

#### ë¡œê·¸ ë¶„ì„ ì˜ˆì‹œ

**ì„±ëŠ¥ ë©”íŠ¸ë¦­ ì¶”ì¶œ**:
```powershell
Select-String -Pattern "PERFORMANCE|process_search_results_combined|expand_keywords" logs/test/run_query_test_*.log
```

**Keyword Coverage ì¶”ì¶œ**:
```powershell
Select-String -Pattern "Keyword Coverage" logs/test/run_query_test_*.log
```

**ì—ëŸ¬ ë¡œê·¸ ì¶”ì¶œ**:
```powershell
Select-String -Pattern "ERROR|âŒ|âš ï¸" logs/test/run_query_test_*.log
```

**ë©”íƒ€ë°ì´í„° ì˜¤íƒ€ í™•ì¸**:
```powershell
Select-String -Pattern "interpretation_id|interpretatiion_id|interpretattion_id|Normalized typo|Fixed typo" logs/test/run_query_test_*.log
```

#### í™˜ê²½ ë³€ìˆ˜ ìš”ì•½

| í™˜ê²½ ë³€ìˆ˜ | ì„¤ëª… | ê¸°ë³¸ê°’ |
|---------|------|--------|
| `TEST_LOG_FILE` | ë¡œê·¸ íŒŒì¼ ê²½ë¡œ (ì „ì²´ ê²½ë¡œ) | ìë™ ìƒì„± |
| `TEST_LOG_DIR` | ë¡œê·¸ ë””ë ‰í† ë¦¬ | `logs/test` |
| `TEST_LOG_LEVEL` | ë¡œê·¸ ë ˆë²¨ | `INFO` |

**ìì„¸í•œ ë‚´ìš©**: `docs/11.cursor_rules/run_query_test_logging.md` ì°¸ì¡°

---

ì´ ê·œì¹™ë“¤ì€ LawFirmAI í”„ë¡œì íŠ¸ì˜ ì¼ê´€ì„±ê³¼ í’ˆì§ˆì„ ë³´ì¥í•˜ê¸° ìœ„í•´ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤. 
í”„ë¡œì íŠ¸ ì§„í–‰ì— ë”°ë¼ í•„ìš”ì— ë”°ë¼ ìˆ˜ì • ë° ë³´ì™„í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.
